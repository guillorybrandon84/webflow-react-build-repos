{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.js","webpack:///external \"cheerio\"","webpack:///external \"path\"","webpack:///./src/git.js","webpack:///external \"execa\"","webpack:///external \"rimraf\"","webpack:///./src/libs/index.js","webpack:///./src/libs/fs.js","webpack:///external \"fs\"","webpack:///external \"util\"","webpack:///./src/libs/mkdirp.js","webpack:///external \"fs-extra\"","webpack:///./src/libs/ncp.js","webpack:///./src/libs/reread.js","webpack:///external \"recursive-readdir\"","webpack:///./src/libs/rimraf.js","webpack:///./src/writers/index.js","webpack:///./src/writers/writer.js","webpack:///./src/writers/view-writer.js","webpack:///external \"htmltojsx\"","webpack:///external \"statuses\"","webpack:///external \"uglify-js\"","webpack:///./src/raw/index.js","webpack:///./src/utils/index.js","webpack:///./src/utils/internal.js","webpack:///./src/utils/requireText.js","webpack:///external \"resolve\"","webpack:///./src/writers/script-writer.js","webpack:///external \"node-fetch\"","webpack:///./src/writers/style-writer.js","webpack:///external \"clean-css\""],"names":["defaultPublicSubFolders","transpile","config","inputFiles","outputFiles","Promise","all","fs","readdir","input","then","files","git","removeWFRFiles","push","e","console","log","folders","filter","path","extname","file","length","includes","map","folder","htmlFiles","publicSubDirs","scriptWriter","baseUrl","prefetch","styleWriter","source","srouce","transpilingHTMLFiles","transpileHTMLFile","htmlFile","viewWriters","writingFiles","ViewWriter","writeAll","output","src","views","components","meta","styles","controllers","paths","write","makingPublicDir","makePublicDir","add","commit","html","readFile","toString","$","cheerio","load","$head","$body","viewWriter","name","split","slice","join","parent","isComponent","setStyles","setHTML","publicDir","public","ncp","publicSubDir","filePaths","reread","relativePaths","relativePath","relative","filePath","_","stylesDir","$styles","find","each","i","style","$style","setStyle","attr","$div","orPathRel","from","to","replace","stdout","root","execa","resolve","unstaged","results","reduce","concat","Boolean","message","stdio","diffFiles","rimraf","res","mkdir","promisify","stat","unlink","writeFile","mkdirp","copy","remove","Writer","Error","Symbol","htmltojsx","createClass","adjustImagesToRoot","removeHtmlFromLinks","Internal","dir","componentDir","metaDir","ctrlsDir","indexFilePath","helpersFilePath","routesFilePath","childFilePaths","routes","className","toLowerCase","index","leanViewWriters","vw","forEach","writtingRoutes","freeLint","writingIndex","writingHelpers","raw","viewHelpers","String","comp","children","isNaN","Number","statuses","words","splitWords","Object","assign","ctrlClassName","metaClassName","elName","word","el","$el","$afEl","insertAfter","child","scripts","script","$script","type","test","body","sockets","socketName","tagName","socketAttrs","socketAttr","jsx","convert","trim","bindJSX","constructor","options","writingChildren","isNestedComponent","writingSelf","compose","href","content","exists","some","sheets","css","sheet","escape","_compose","compDir","shouldHaveStyles","composeChildImports","composeProxiesDefault","_composeStyleImports","_composeProxiesDefault","socket","defaultType","_composeChildImports","imported","imports","imp","_composeScriptsDeclerations","minified","uglify","minify","code","_composeScriptsInvocations","invoke","freeScope","freeText","camelize","text","letter","toUpperCase","self","isList","RegExp","exec","mergeProps","match","base","sock","attrs","filename","__dirname","requireText","str","quote","importantizeCSS","Array","baseIndent","line","lines","minIndent","currIndent","Infinity","freeContext","context","args","callArgs","keys","upperFirst","substr","padLeft","char","parseInt","TypeError","Klass","internals","defineProperty","prototype","get","_this","key","value","bind","getOwnPropertyNames","getOwnPropertyDescriptor","publicKey","cache","resolvePath","sync","readFileSync","promise","reject","err","ScriptWriter","composeScriptLoader","scriptFileNames","fileName","fetchingScripts","scriptFileName","fetch","scriptsIndexContent","setScript","_composeScriptLoader","cleanCSS","rebaseTo","StyleWriter","composeStyleLoader","styleFileNames","fetchingStyles","styleFileName","transformSheet","stylesIndexContent","_composeStyleLoader","_transformSheet","url"],"mappings":"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","file":"webflow-react.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import cheerio from 'cheerio';\nimport path from 'path';\nimport git from './git';\nimport { fs, ncp, reread } from './libs';\nimport { ViewWriter, ScriptWriter, StyleWriter } from './writers';\n\nconst defaultPublicSubFolders = ['css', 'fonts', 'images', 'js'];\n\nexport const transpile = async config => {\n\tlet inputFiles;\n\tlet outputFiles = [];\n\ttry {\n\t\tawait Promise.all([\n\t\t\tfs.readdir(config.input).then(files => {\n\t\t\t\tinputFiles = files;\n\t\t\t}),\n\t\t\tgit.removeWFRFiles(config).then(files => {\n\t\t\t\toutputFiles.push(...files);\n\t\t\t}),\n\t\t]);\n\t} catch (e) {\n\t\tconsole.log(e);\n\t}\n\n\tconst folders = inputFiles.filter(\n\t\tfile =>\n\t\t\t!path.extname(file).length &&\n\t\t\t!defaultPublicSubFolders.includes(file)\n\t);\n\ttry {\n\t\tawait Promise.all(\n\t\t\tfolders.map(folder =>\n\t\t\t\tfs.readdir(`${config.input}/${folder}`).then(files => {\n\t\t\t\t\tinputFiles = [\n\t\t\t\t\t\t...(inputFiles || []),\n\t\t\t\t\t\t...(files || []).map(file => `${folder}/${file}`),\n\t\t\t\t\t];\n\t\t\t\t})\n\t\t\t)\n\t\t);\n\t} catch (e) {\n\t\tconsole.log(e);\n\t}\n\tconst htmlFiles = inputFiles.filter(file => path.extname(file) == '.html');\n\n\tconst publicSubDirs = inputFiles.filter(\n\t\tfile => !path.extname(file) && defaultPublicSubFolders.includes(file)\n\t);\n\n\tconst scriptWriter = new ScriptWriter({\n\t\tbaseUrl: config.input,\n\t\tprefetch: config.prefetch,\n\t});\n\n\tconst styleWriter = new StyleWriter({\n\t\tbaseUrl: config.input,\n\t\tprefetch: config.prefetch,\n\t\tsource: config.srouce,\n\t});\n\n\tconst transpilingHTMLFiles = htmlFiles.map(htmlFile => {\n\t\treturn transpileHTMLFile(config, htmlFile, scriptWriter, styleWriter);\n\t});\n\tconst viewWriters = await Promise.all(transpilingHTMLFiles);\n\tconst writingFiles = Promise.all([\n\t\tViewWriter.writeAll(\n\t\t\tviewWriters,\n\t\t\tconfig.output.src.views,\n\t\t\tconfig.output.src.components,\n\t\t\tconfig.output.src.meta,\n\t\t\tconfig.output.src.styles,\n\t\t\tconfig.output.src.controllers\n\t\t).then(paths => outputFiles.push(...paths)),\n\t\t// scriptWriter.write(\n\t\t//   config.output.src.scripts\n\t\t// ).then((paths) => outputFiles.push(...paths)),\n\t\tstyleWriter\n\t\t\t.write(config.output.src.styles)\n\t\t\t.then(paths => outputFiles.push(...paths)),\n\t]);\n\n\tconst makingPublicDir = makePublicDir(config, publicSubDirs).then(paths =>\n\t\toutputFiles.push(...paths)\n\t);\n\ttry {\n\t\tawait Promise.all([writingFiles, makingPublicDir]);\n\t} catch (e) {\n\t\tconsole.log(e);\n\t}\n\n\treturn git.add(outputFiles, config).then(files => {\n\t\treturn git.commit(files, 'Updated');\n\t});\n};\n\nconst transpileHTMLFile = async (\n\tconfig,\n\thtmlFile,\n\tscriptWriter,\n\tstyleWriter\n) => {\n\tconst html = (await fs.readFile(`${config.input}/${htmlFile}`)).toString();\n\tconst $ = cheerio.load(html);\n\tconst $head = $('head');\n\tif (!!scriptWriter && !!styleWriter) {\n\t\t// pass\n\t}\n\tconst $body = $('body');\n\tconst viewWriter = new ViewWriter({\n\t\tname: htmlFile\n\t\t\t.split('/')[htmlFile.split('/').length - 1].split('.')\n\t\t\t.slice(0, -1)\n\t\t\t.join('.'),\n\t\tbaseUrl: config.baseUrl,\n\t\tparent:\n\t\t\thtmlFile.split('/')[0] === htmlFile ? null : htmlFile.split('/')[0],\n\t\tisComponent: false,\n\t\tsource: config.source,\n\t});\n\n\t// setScripts(scriptWriter, $head, $)\n\n\tsetStyles(viewWriter, styleWriter, $head, $, config.output.src.styles);\n\tsetHTML(viewWriter, $body, $);\n\n\treturn viewWriter;\n};\n\nconst makePublicDir = async (config, publicSubDirs) => {\n\tconst publicDir = config.output.public;\n\tawait Promise.all(\n\t\tpublicSubDirs.map(publicSubDir => {\n\t\t\treturn ncp(\n\t\t\t\t`${config.input}/${publicSubDir}`,\n\t\t\t\t`${publicDir}/${publicSubDir}`\n\t\t\t);\n\t\t})\n\t);\n\n\t// Resolving relative paths\n\tconst filePaths = await reread(config.input);\n\n\tconst relativePaths = filePaths.map(filePath => {\n\t\tconst relativePath = path.relative(config.input, filePath);\n\n\t\treturn `${publicDir}/${relativePath}`;\n\t});\n\n\treturn relativePaths;\n};\n\n// const setScripts = (scriptWriter, $head) => {\n//   const $scripts = $head.find('script[type=\"text/javascript\"]')\n\n//   $scripts.each((i, script) => {\n//     const $script = $head.find(script)\n\n//     scriptWriter.setScript($script.attr('src'), $script.html())\n//   })\n// }\n\nconst setStyles = (viewWriter, styleWriter, $head, _, stylesDir) => {\n\tlet $styles;\n\n\t$styles = $head.find('link[rel=\"stylesheet\"][type=\"text/css\"]');\n\n\t$styles.each((i, style) => {\n\t\tconst $style = $head.find(style);\n\n\t\tviewWriter.setStyle($style.attr('href'), $style.html(), stylesDir);\n\t\tstyleWriter.setStyle($style.attr('href'), $style.html());\n\t});\n\n\t$styles = $head.find('style');\n\n\t$styles.each((i, style) => {\n\t\tconst $style = $head.find(style);\n\n\t\tviewWriter.setStyle($style.attr('href'), $style.html(), stylesDir);\n\t\tstyleWriter.setStyle($style.attr('href'), $style.html());\n\t});\n};\n\nconst setHTML = (viewWriter, $body, $) => {\n\t// Create a wrap around $body so we can inherit its style without actually\n\t// using a <body> tag\n\tconst $div = $('<div>');\n\t$div.html($body.html());\n\t$div.attr($body.attr());\n\tviewWriter.html = $.html($div);\n};\n","module.exports = require(\"cheerio\");","module.exports = require(\"path\");","import execa from 'execa';\nimport path from 'path';\nimport rimraf from 'rimraf';\n// import { fs } from \"./libs\";\n\n// attempt at supporting windows by monkey patching path.relative\n// to prevent backslashes\nconst orPathRel = path.relative;\npath.relative = (from, to) => orPathRel(from, to).replace(/\\\\/gi, '/');\n\n// Will add given files and will ignore those who aren't exist\nexport const add = async (files, config) => {\n\tconst { stdout: root } = await execa('git', [\n\t\t'rev-parse',\n\t\t'--show-toplevel',\n\t]);\n\n\tfiles = files.map(file => path.resolve(root, file));\n\n\tlet unstaged = await Promise.all([\n\t\texeca('git', ['diff', '--name-only']),\n\t\texeca('git', ['ls-files', '--others', '--exclude-standard']),\n\t]).then(results => {\n\t\treturn results.reduce((unstaged, { stdout }) => {\n\t\t\treturn unstaged.concat(stdout.split('\\n').filter(Boolean));\n\t\t}, []);\n\t});\n\n\tunstaged = unstaged.map(file => path.resolve(root, file));\n\tfiles = files.filter(file => unstaged.includes(file));\n\tawait execa('git', [\n\t\t'add',\n\t\t...files,\n\t\t`${config.output.src.root}/routes.js`,\n\t\tconfig.output.src.views,\n\t\tconfig.output.src.components,\n\t\tconfig.output.src.styles,\n\t\tconfig.output.public,\n\t]);\n\n\treturn [\n\t\t...files,\n\t\t`${config.output.src.root}/routes.js`,\n\t\tconfig.output.src.views,\n\t\tconfig.output.src.components,\n\t\tconfig.output.src.styles,\n\t\tconfig.output.public,\n\t];\n};\n\n// Will commit changes, and if files not exist, will print status\nexport const commit = (files, message, stdio = 'inherit') => {\n\tif (files && files.length)\n\t\ttry {\n\t\t\treturn execa(\n\t\t\t\t'git',\n\t\t\t\t['commit', '-m', `Webflow React: ${message}`, '--allow-empty'],\n\t\t\t\t{\n\t\t\t\t\tstdio,\n\t\t\t\t}\n\t\t\t);\n\t\t} catch (e) {\n\t\t\t// Probably no changes were made\n\t\t}\n\n\treturn execa('git', ['status'], {\n\t\tstdio,\n\t});\n};\n\nexport const removeWFRFiles = async config => {\n\tconst { stdout: diffFiles } = await execa('git', ['diff', '--name-only']);\n\n\tif (diffFiles) {\n\t\t// throw Error(\n\t\t//   [\n\t\t//     \"Cannot transpile: Your index contains uncommitted changes.\",\n\t\t//     \"Please commit or stash them.\"\n\t\t//   ].join(\"\\n\")\n\t\t// );\n\t\tconsole.log(\n\t\t\t[\n\t\t\t\t'=========',\n\t\t\t\t'Warning: You have uncommitted changes!',\n\t\t\t\t'=========',\n\t\t\t].join('\\n')\n\t\t);\n\t}\n\n\t// let { stderr, stdout: hash } = await execa(\"git\", [\n\t//   \"log\",\n\t//   \"-1\",\n\t//   \"--format=%H\",\n\t//   `--grep=webflow-react: Updated`\n\t// ]);\n\n\t// // Probably git is not initialized\n\t// if (stderr) throw Error(stderr);\n\t// // No previous migrations found\n\t// if (!hash) return [];\n\n\t// List all files but deleted ones\n\t// let { stdout: files } = await execa(\"git\", [\n\t//   \"diff\",\n\t//   \"--name-only\",\n\t//   \"--diff-filter=ACMRTUXB\",\n\t//   `${hash}~1`,\n\t//   hash\n\t// ]);\n\t// files = files.split(\"\\n\").filter(Boolean);\n\t// console.log(files)\n\n\t// const { stdout: root } = await execa(\"git\", [\"rev-parse\", \"--show-toplevel\"]);\n\n\tawait Promise.all([\n\t\t// ...files.map(async file => {\n\t\t//   return fs.unlink(`${root}/${file}`);\n\t\t// }),\n\t\tnew Promise(res =>\n\t\t\trimraf(`${config.output.src.root}/routes.js`, () => res())\n\t\t),\n\t\tnew Promise(res => rimraf(config.output.src.views, () => res())),\n\t\tnew Promise(res => rimraf(config.output.src.components, () => res())),\n\t\tnew Promise(res => rimraf(config.output.src.styles, () => res())),\n\t]);\n\n\t// return [...files||[]];\n\treturn [\n\t\t`${config.output.src.root}/routes.js`,\n\t\tconfig.output.src.views,\n\t\tconfig.output.src.components,\n\t\tconfig.output.src.styles,\n\t\tconfig.output.public,\n\t];\n};\n\nexport default {\n\tadd,\n\tcommit,\n\tremoveWFRFiles,\n};\n","module.exports = require(\"execa\");","module.exports = require(\"rimraf\");","export { default as fs } from './fs'\nexport { default as mkdirp } from './mkdirp'\nexport { default as ncp } from './ncp'\nexport { default as reread } from './reread'\nexport { default as rimraf } from './rimraf'\n","import fs from 'fs'\nimport { promisify } from 'util'\n\nexport const mkdir = promisify(fs.mkdir)\nexport const readdir = promisify(fs.readdir)\nexport const readFile = promisify(fs.readFile)\nexport const stat = promisify(fs.stat)\nexport const unlink = promisify(fs.unlink)\nexport const writeFile = promisify(fs.writeFile)\n\nexport default {\n  mkdir,\n  readdir,\n  readFile,\n  stat,\n  unlink,\n  writeFile,\n}\n","module.exports = require(\"fs\");","module.exports = require(\"util\");","import fs from 'fs-extra'\nimport { promisify } from 'util'\n\nexport default promisify(fs.mkdirp)\n","module.exports = require(\"fs-extra\");","import fs from 'fs-extra'\nimport { promisify } from 'util'\n\nexport default promisify(fs.copy)\n","import reread from 'recursive-readdir'\nimport { promisify } from 'util'\n\nexport default promisify(reread)\n","module.exports = require(\"recursive-readdir\");","import fs from 'fs-extra'\nimport { promisify } from 'util'\n\nexport default promisify(fs.remove)\n","export { default as Writer } from './writer'\nexport { default as ViewWriter } from './view-writer'\nexport { default as ScriptWriter } from './script-writer'\nexport { default as StyleWriter } from './style-writer'\n","class Writer {\n  write() {\n    throw Error('Writer.write() must be implemented')\n  }\n}\n\nexport default Writer\n","import cheerio from \"cheerio\";\nimport HTMLtoJSX from \"htmltojsx\";\nimport path from \"path\";\nimport statuses from \"statuses\";\nimport uglify from \"uglify-js\";\nimport { fs, mkdirp } from \"../libs\";\nimport raw from \"../raw\";\nimport Writer from \"./writer\";\n\nconst writingFiles = []\n\n// attempt at supporting windows by monkey patching path.relative\n// to prevent backslashes\nconst orPathRel = path.relative;\npath.relative = (from, to) =>\n  orPathRel(from, to).replace(/\\\\/gi, '/')\n\nimport {\n  escape,\n  freeLint,\n  freeScope,\n  freeText,\n  Internal,\n  splitWords,\n  upperFirst\n} from \"../utils\";\n\nconst _ = Symbol(\"_ViewWriter\");\nconst htmltojsx = new HTMLtoJSX({ createClass: false });\n\n// const flattenChildren = (children = [], flatten = []) => {\n//   children.forEach(child => {\n//     flattenChildren(child[_].children, flatten);\n//   });\n\n//   flatten.push(...children);\n\n//   return flatten;\n// };\n\nconst adjustImagesToRoot = (html) => html.replace(/src=\"/ig, 'src=\"/');\n// const removeHtmlFromLinks = (html) => adjustImagesToRoot(html.replace('index.html', '').replace(/\\.html/ig, '').replace(/href=\"/ig, 'href=\"/'))\nconst removeHtmlFromLinks = (html) => adjustImagesToRoot(html.replace('index.html', '').replace(/\\.html/ig, ''))\n\n@Internal(_)\nclass ViewWriter extends Writer {\n  static async writeAll(viewWriters, dir, componentDir, metaDir, stylesDir, ctrlsDir) {\n    await mkdirp(dir);\n    await mkdirp(componentDir);\n    await mkdirp(stylesDir);\n    await mkdirp(metaDir);\n    const indexFilePath = `${dir}/index.js`;\n    const helpersFilePath = `${dir}/../helpers.js`;\n    const routesFilePath = `${dir}/../routes.js`;\n    const childFilePaths = [indexFilePath, helpersFilePath, routesFilePath];\n    ctrlsDir = path.relative(dir, ctrlsDir);\n    const routes = `\nimport React from 'react';\nimport { Route } from 'react-router-dom';\nimport * as Views from './views';\n\nexport default () => [\n  <Route key=\"route_index\" path=\"/\" component={Views.IndexView} exact />,\n  ${viewWriters\n        .map(\n          viewWriter => `<Route key=\"route_${viewWriter.className.replace(/view/gi, '')}\" path=\"${viewWriter.parent ? `/${viewWriter.parent}` : ''}/${viewWriter.className.replace(/view/gi, '').split(/(?=[A-Z])/).join('-').toLowerCase()}\" component={Views.${viewWriter.className}} exact />`\n        )\n        .join(\",\\n  \")}\n]`;\n    const index = viewWriters\n      .map(viewWriter => {\n        return `export { default as ${viewWriter.className} } from './${\n          viewWriter.className\n          }'`;\n      })\n      .join(\"\\n\");\n\n    const leanViewWriters = []\n    // viewWriters = flattenChildren(viewWriters);\n\n    for (const viewWriter of viewWriters) {\n      if (!leanViewWriters.find(vw => vw.className === viewWriter.className)) {\n        leanViewWriters.push(viewWriter);\n      }\n    }\n    leanViewWriters.forEach(async viewWriter => {\n      const filePaths = await viewWriter.write(dir, componentDir, metaDir, stylesDir, ctrlsDir);\n      childFilePaths.push(...filePaths);\n    })\n\n\n\n    const writtingRoutes = fs.writeFile(routesFilePath, freeLint(routes));\n    const writingIndex = fs.writeFile(indexFilePath, freeLint(index));\n    const writingHelpers = fs.writeFile(helpersFilePath, raw.viewHelpers);\n\n    await Promise.all([writingIndex, writingHelpers, writtingRoutes]);\n    return childFilePaths;\n  }\n\n  get baseUrl() {\n    return this[_].baseUrl;\n  }\n\n  set baseUrl(baseUrl) {\n    this[_].baseUrl = String(baseUrl);\n  }\n\n  set isComponent(comp) {\n    this[_].isComponent = comp;\n  }\n\n  get isComponent() {\n    return this[_].isComponent;\n  }\n\n  get children() {\n    return this[_].children.slice();\n  }\n\n  set name(name) {\n    if (!isNaN(Number(name))) {\n      name = statuses[name];\n    }\n\n    const words = splitWords(name);\n    Object.assign(this[_], {\n      ctrlClassName: words\n        .concat(\"controller\")\n        .map(upperFirst)\n        .join(\"\"),\n      metaClassName: words\n        .concat(\"meta\")\n        .map(upperFirst)\n        .join(\"\"),\n      className: words\n        .concat(\"view\")\n        .map(upperFirst)\n        .join(\"\"),\n      elName: words.map(word => word.toLowerCase()).join(\"-\"),\n      name: words\n        .concat(\"view\")\n        .map(word => word.toLowerCase())\n        .join(\"-\")\n    });\n  }\n\n  get name() {\n    return this[_].name;\n  }\n\n  get ctrlClassName() {\n    return this[_].ctrlClassName;\n  }\n\n  get metaClassName() {\n    return this[_].metaClassName;\n  }\n\n  get className() {\n    return this[_].className;\n  }\n\n  get elName() {\n    return this[_].elName;\n  }\n\n  set html(html) {\n    if (!html) {\n      this[_].html = \"\";\n      this[_].children = [];\n      return;\n    }\n\n    const children = (this[_].children = []);\n    const $ = cheerio.load(html);\n\n    // console.log(this[_].className, ($(\"[wfr-c]\") || []).length)\n\n    let el = $(\"[wfr-c]\")[0];\n    while (el) {\n\n      const $el = $(el);\n      const elName = $el.attr(\"wfr-c\");\n      const $afEl = $(`<af-${elName}></af-${elName}>`);\n      // const sock = $el.attr(\"wfr-d\");\n      // $afEl.attr(\"wfr-d\", $el.attr(\"wfr-d\"));\n      $el.attr(\"wfr-c\", null);\n      // $el.attr(\"wfr-d\", null);\n      $afEl.insertAfter($el);\n      // if (sock !== null && sock !== undefined) {\n      //   $el.prepend(`<span wfr-d=\"${sock}\">`);\n      //   $el.append('</span>');\n      // }\n      $el.remove();\n\n      const child = new ViewWriter({\n        name: elName,\n        html: $.html($el),\n        baseUrl: this.baseUrl,\n        styles: this.styles,\n        isComponent: true\n      });\n\n      children.push(child);\n      el = $(\"[wfr-c]\")[0];\n    }\n\n    // Apply ignore rules AFTER child elements were plucked\n    $(\"[af-ignore]\").remove();\n    // Empty inner HTML\n    $(\"[af-empty]\")\n      .html(\"\")\n      .attr(\"af-empty\", null);\n\n    this[_].scripts = [];\n\n    // Set inline scripts. Will be loaded once component has been mounted\n    $(\"script\").each((i, script) => {\n      const $script = $(script);\n      const src = $script.attr(\"src\");\n      const type = $script.attr(\"type\");\n\n      // We're only interested in JavaScript script tags\n      if (type && !/javascript/i.test(type)) return;\n\n      if (src) {\n        this[_].scripts.push({\n          type: \"src\",\n          body: src\n        });\n      } else {\n        this[_].scripts.push({\n          type: \"code\",\n          body: $script.html()\n        });\n      }\n\n      $script.remove();\n    });\n\n    const $body = $(\"body\");\n    html = $body.html();\n\n    this[_].html = html;\n\n    const sockets = (this[_].sockets = []);\n\n    // Find root sockets\n    $(\"[wfr-d]\").each((i, el) => {\n      const $el = $(el);\n      const socketName = $el.attr(\"wfr-d\");\n      sockets.push(socketName);\n\n      $el.attr(\"wfr-d\", null);\n      // Workaround would help identify the closing tag\n      el.tagName += `-wfr-d-${socketName}`;\n    });\n\n    // Attach socket attributes.\n    $('[wfr-a]').each((i, el) => {\n      const $el = $(el);\n      const socketAttrs = $el.attr(\"wfr-a\").split(',');\n\n      socketAttrs.forEach((socketAttr) => {\n        sockets.push('%string%' + socketAttr);\n\n        // Workaround to identify socket attributes.\n        $el.attr('wfr-a-' + socketAttr, \"{ proxies['\" + socketAttr + \"'] }\");\n      });\n\n      $el.attr(\"wfr-a\", null);\n    });\n\n    // Refetch modified html\n    html = $body.html();\n\n\n\n    // Transforming HTML into JSX\n    let jsx = htmltojsx.convert(removeHtmlFromLinks(html)).trim();\n\n    // Bind controller to view\n    this[_].jsx = bindJSX(this, jsx, children);\n  }\n\n  get scripts() {\n    return this[_].scripts ? this[_].scripts.slice() : [];\n  }\n\n  get styles() {\n    return this[_].styles.slice();\n  }\n\n  get html() {\n    return this[_].html;\n  }\n\n  get jsx() {\n    return this[_].jsx;\n  }\n\n  get sockets() {\n    return this[_].sockets && [...this[_].sockets];\n  }\n\n  get source() {\n    return this[_].source;\n  }\n\n  set source(source) {\n    this[_].source = String(source);\n  }\n\n  constructor(options) {\n    super();\n\n    this[_].children = [];\n    this[_].styles = options.styles || [];\n\n    this.name = options.name;\n    this.parent = options.parent;\n    this.isComponent = options.isComponent;\n    this.html = options.html;\n    this.source = options.source;\n  }\n\n  async write(dir, componentDir, metaDir, stylesDir, ctrlsDir) {\n    const filePath = `${dir}/${this.className}.js`;\n    const childFilePaths = [filePath];\n    const writingChildren = this[_].children.map(async child => {\n      if (!writingFiles.includes(child.className)) {\n        writingFiles.push(child.className);\n        const filePaths = await child.write(componentDir, componentDir, metaDir, stylesDir, ctrlsDir);\n        childFilePaths.push(...filePaths);\n      }\n    });\n    const isNestedComponent = dir === componentDir;\n    let writingSelf\n\n    if (!writingFiles.includes(`${this.className}.js`)) {\n      try {\n        await fs.readFile(`${dir}/${this.className}.js`);\n      } catch (e) {\n        // pass\n        writingSelf = fs.writeFile(\n          `${dir}/${this.className}.js`,\n          this[_].compose(\n            path.relative(dir, componentDir),\n            path.relative(dir, metaDir),\n            path.relative(dir, stylesDir),\n            ctrlsDir,\n            !isNestedComponent\n          )\n        )\n      }\n    }\n\n\n    try {\n      await Promise.all([...writingChildren, writingSelf]);\n    } catch (e) {\n      console.log(e);\n    }\n    return childFilePaths;\n  }\n\n  async setStyle(href, content, stylesDir) {\n    let type;\n    let body;\n\n    if (href) {\n      type = \"href\";\n      body = /^\\w+:\\/\\//.test(href) ? href : path.resolve(\"/\", href);\n    } else {\n      type = \"sheet\";\n      body = content;\n    }\n\n    const exists = this[_].styles.some(style => {\n      return style.body == body;\n    });\n\n    if (!exists) {\n      this[_].styles.push({ type, body });\n    }\n\n    const sheets = this[_].styles\n      .map(({ type, body }) => {\n        return type == \"sheet\" && body;\n      })\n      .filter(Boolean);\n\n    let css = \"\";\n\n    // css += hrefs.map((href) => {\n    //   return `@import url(${href});`\n    // }).join('\\n')\n\n\n    css += \"\\n\\n\";\n\n    css += sheets\n      .map(sheet => {\n        return sheet;\n      })\n      .join(\"\\n\\n\");\n    if (!stylesDir || !css.length) return true;\n    try {\n      await mkdirp(stylesDir);\n      await fs.writeFile(`${stylesDir}/${this.className}.css`, escape(css.trim()));\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  _compose(compDir, metaDir, stylesDir, ctrlsDir, shouldHaveStyles = true) {\n    return freeLint(`\n      import React from 'react'\n      import { createScope, map, transformProxies } from '../helpers'\n      ${shouldHaveStyles ? `import \"${stylesDir}/${this.className}.css\"` : ''}\n      ==>${this[_].composeChildImports(compDir)}<==\n\n      let Controller\n\n      class ${this.className} extends React.Component {\n        static get Controller() {\n          if (Controller) return Controller\n\n          try {\n            Controller = require('${ctrlsDir}/${this.ctrlClassName}')\n            Controller = Controller.default || Controller\n\n            return Controller\n          }\n          catch (e) {\n            if (e.code == 'MODULE_NOT_FOUND') {\n              Controller = ${this.className}\n\n              return Controller\n            }\n\n            throw e\n          }\n        }\n\n        render() {\n          const proxies = Controller !== ${\n      this.className\n      } ? transformProxies(this.props) : {\n            ==>${this[_].composeProxiesDefault()}<==\n          }\n\n          ${this[_].isComponent ? '' : `\n          let Metadata\n          try {\n            Metadata = require(\"${metaDir}/${this.metaClassName}\")\n            Metadata = Metadata.default || Metadata\n          } catch (e) {\n            // pass\n            Metadata = null;\n          }\n          try {\n            Metadata = require(\"${metaDir}/defaultMeta\")\n            Metadata = Metadata.default || Metadata\n          } catch (e) {\n            // pass\n            Metadata = null;\n          }\n          `}\n\n\n          return (\n            <React.Fragment>\n              ${!this[_].isComponent ? '{Metadata ? <Metadata {...this.props} /> : null}' : ''}\n              ==>${this.jsx}<==\n            </React.Fragment>\n          )\n        }\n      }\n\n      export default ${this.className}\n    `);\n  }\n\n  _composeStyleImports() {\n    // const hrefs = this[_].styles.map(({ type, body }) => {\n    //   return type == 'href' && body\n    // }).filter(Boolean)\n\n    const sheets = this[_].styles\n      .map(({ type, body }) => {\n        return type == \"sheet\" && body;\n      })\n      .filter(Boolean);\n\n    let css = \"\";\n\n    // css += hrefs.map((href) => {\n    //   return `@import url(${href});`\n    // }).join('\\n')\n\n    css += \"\\n\\n\";\n\n    css += sheets\n      .map(sheet => {\n        return sheet;\n      })\n      .join(\"\\n\\n\");\n\n    return escape(css.trim());\n  }\n\n  _composeProxiesDefault() {\n    return this[_].sockets\n      .map(socket => {\n        let defaultType = '[]';\n\n        if (socket.includes('%string%')) {\n          socket = socket.replace('%string%', '');\n          defaultType = \"''\";\n        }\n\n        return `'${socket}': ` + defaultType + `,`;\n      })\n      .join(\"\\n\");\n  }\n\n  _composeChildImports(compDir) {\n    if (!compDir) {\n      compDir = '.';\n    }\n    const imported = [];\n\n    const imports = this[_].children.map(child => {\n      if (!imported.includes(child.className)) {\n        imported.push(child.className);\n        return `import ${child.className} from '${compDir}/${child.className}'`;\n      }\n    }).filter(imp => !!imp && imp.length);\n\n    // Line skip\n    imports.push(\"\");\n\n    return imports.join(\"\\n\");\n  }\n\n  _composeScriptsDeclerations() {\n    return this[_].scripts\n      .map(script => {\n        if (script.type == \"src\") {\n          return `fetch(\"${script.body}\").then(body => body.text()),`;\n        }\n\n        const minified = uglify.minify(script.body).code;\n        // Unknown script format ??? fallback to maxified version\n        const code = minified || script.body;\n\n        return `Promise.resolve(\"${escape(code)}\"),`;\n      })\n      .join(\"\\n\");\n  }\n\n  _composeScriptsInvocations() {\n    if (!this[_].scripts) return \"\";\n\n    const invoke = freeScope(\"eval(arguments[0])\", \"window\", {\n      script: null\n    });\n\n    return freeText(`\n      scripts.concat(Promise.resolve()).reduce((loaded, loading) => {\n        return loaded.then((script) => {\n          ==>${invoke}<==\n\n          return loading\n        })\n      })\n    `);\n  }\n}\n\nfunction camelize(text) {\n  return text.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, function (letter, index) {\n    return index == 0 ? letter.toLowerCase() : letter.toUpperCase();\n  }).replace(/\\s+/g, '');\n}\n\nfunction bindJSX(self, jsx, children = []) {\n  // DETECT LIST\n  children.forEach((child, index) => {\n    const isList = (new RegExp(`(<af-${child.elName} />\\\\s*){2,}`, \"\")).exec(jsx);\n    if (isList) {\n      self[_].sockets.push(`${camelize(child.className)}List${index}`)\n      jsx = jsx.replace(\n        new RegExp(`(<af-${child.elName} />\\\\s*){2,}`, \"\"),\n        `{map(proxies['${camelize(child.className)}List${index}'], props => <React.Fragment ${mergeProps(\n          ''\n        )}>{props.children ? props.children : null}</React.Fragment>)}`\n\n      );\n    } else {\n\n      jsx = jsx.replace(\n        new RegExp(`af-${child.elName}`, \"g\"),\n        `${child.className}.Controller {...this.props}`\n      );\n\n      jsx = jsx.replace(\n        new RegExp(`(<af-${child.elName} />\\\\s*)+`, !self[_].isComponent ? \"g\" : \"\"),\n        !self[_].isComponent ? `<${child.className}.Controller {...this.props}/>` :\n          `{map(proxies['${child.className}'], props => <${child.className}.Controller ${mergeProps(\n            ''\n          )}>{props.children ? props.children : null}</${child.className}.Controller>)}`\n\n      );\n    }\n  });\n\n  // ORDER MATTERS\n  // Open close\n  return (\n    jsx\n      // Replace attributes\n      .replace(\n        /(wfr-a-)([\\w_-]+)=(\".*?\")/g,\n        (match, base) => match.replace(base, '').replace(/[\"]+/g, '')\n      )\n      // Open close\n      .replace(\n        /<([\\w_-]+)-wfr-d-([\\w_-]+)(.*?)>([^]*)<\\/\\1-wfr-d-\\2>/g,\n        (match, el, sock, attrs, children) => {\n\n          // // attrs.forEach(attr => attr.replace('wfr-a-', ''));\n          // console.log(el);\n\n          return /<[\\w_-]+-wfr-d-[\\w_-]+/.test(children)\n            ? `{map(proxies['${sock}'], props => <${el} ${mergeProps(\n              attrs\n            )}>{createScope(props.children, proxies => <React.Fragment>\n                {props.topelement ? props.topelement() : null}\n                ${bindJSX(\n              self,\n              children\n            )}</React.Fragment>)}</${el}>)}`\n            : `{map(proxies['${sock}'], props => <${el} ${mergeProps(\n              attrs\n            )}>{props.children ? props.children : <React.Fragment>${children}</React.Fragment>}</${el}>)}`\n\n        }\n      )\n      // Self closing\n      .replace(\n        /<([\\w_-]+)-wfr-d-([\\w_-]+)(.*?) \\/>/g,\n        (match, el, sock, attrs) =>\n          `{map(proxies['${sock}'], props => <${el} ${mergeProps(\n            attrs\n          )}>{props.children}</${el}>)}`\n      )\n  );\n}\n\n// Merge props along with class name\nfunction mergeProps(attrs) {\n  attrs = attrs.trim();\n\n  if (!attrs) {\n    return \"{...props}\";\n  }\n\n  let className = attrs.match(/className=\"([^\"]+)\"/);\n\n  if (!className) {\n    return `${attrs} {...props}`;\n  }\n\n  className = className[1];\n  attrs = attrs.replace(/ ?className=\"[^\"]+\"/, \"\");\n\n  return `${attrs} {...{...props, className: \\`${className} $\\{props.className || ''}\\`}}`.trim();\n}\n\nexport default ViewWriter;\n","module.exports = require(\"htmltojsx\");","module.exports = require(\"statuses\");","module.exports = require(\"uglify-js\");","import path from 'path'\nimport { requireText } from '../utils'\n\nconst resolve = filename => path.resolve(__dirname, '../src/raw', filename)\n\n// Exporting an object since we're dealing with a getter\nexport default {\n  get viewHelpers() {\n    return requireText(resolve('viewHelpers.js'))\n  }\n}\n","export { default as Internal } from './internal'\nexport { default as requireText } from './requireText'\n\n// Useful for nested strings that should be evaluated\nexport const escape = (str, quote) => {\n  str = str.replace(/\\\\/g, '\\\\\\\\')\n\n  switch (quote) {\n    case \"'\": return str.replace(/'/g, \"\\\\'\")\n    case '\"': return str.replace(/\"/g, '\\\\\"')\n    case '`': return str.replace(/`/g, '\\\\`')\n    default: return str\n      .replace(/'/g, \"\\\\'\")\n      .replace(/\"/g, '\\\\\"')\n      .replace(/`/g, '\\\\`')\n  }\n}\n\nexport const importantizeCSS = (css) => {\n  return css.replace(/(!important)?;/gi, ' !important;');\n}\n\n// Will use the shortest indention as an axis\nexport const freeText = (text) => {\n  if (text instanceof Array) {\n    text = text.join('')\n  }\n\n  // This will allow inline text generation with external functions, same as ctrl+shift+c\n  // As long as we surround the inline text with ==>text<==\n  text = text.replace(\n    /( *)==>((?:.|\\n)*?)<==/g,\n    (match, baseIndent, content) => {\n      return content\n        .split('\\n')\n        .map(line => `${baseIndent}${line}`)\n        .join('\\n')\n    })\n\n  const lines = text.split('\\n')\n\n  const minIndent = lines.filter(line => line.trim()).reduce((minIndent, line) => {\n    const currIndent = line.match(/^ */)[0].length\n\n    return currIndent < minIndent ? currIndent : minIndent\n  }, Infinity)\n\n  return lines\n    .map(line => line.slice(minIndent))\n    .join('\\n')\n    .trim()\n    .replace(/\\n +\\n/g, '\\n\\n')\n}\n\n// Calls freeText() and disables lint\nexport const freeLint = (script) => {\n  return freeText(`\n    /* eslint-disable */\n\n    ==>${freeText(script)}<==\n\n    /* eslint-enable */\n  `)\n}\n\n// Calls freeLint() and ensures that 'this' is represented by window\nexport const freeContext = (script) => {\n  return freeLint(`\n    (function() {\n\n    ==>${freeText(script)}<==\n\n    }).call(window)\n  `)\n}\n\n// Creates a completely isolated scope with Function constructor.\n// args is a varToInject-injectedVarName map.\nexport const freeScope = (script, context = 'window', args = {}) => {\n  const callArgs = [context].concat(Object.keys(args))\n\n  return freeText(`\n    new Function(\\`\n      with (this) {\n        ${script}\n      }\n    \\`).call(${callArgs.join(', ')})\n  `)\n}\n\n// upper -> Upper\nexport const upperFirst = (str) => {\n  return str.substr(0, 1).toUpperCase() + str.substr(1)\n}\n\n// foo_barBaz -> ['foo', 'bar', 'Baz']\nexport const splitWords = (str) => {\n  return str\n    .replace(/[A-Z]/, ' $&')\n    .split(/[^a-zA-Z0-9]+/)\n    .filter(word => word.trim())\n}\n\n// abc 5 0 -> 00abc\nexport const padLeft = (str, length, char = ' ') => {\n  str = String(str)\n  length = parseInt(length + 1 - str.length)\n\n  return Array(length).join(char) + str\n}\n","const Internal = (_) => {\n  if (typeof _ != 'symbol') {\n    throw TypeError('Accessor must me a symbol')\n  }\n\n  return (Klass) => {\n    if (typeof Klass != 'function') {\n      throw TypeError('Provided target is not a class')\n    }\n\n    const internals = {}\n\n    Object.defineProperty(Klass.prototype, _, {\n      get() {\n        const _this = { ...internals }\n\n        Object.keys(_this).forEach((key) => {\n          const value = _this[key]\n\n          if (typeof value == 'function') {\n            _this[key] = value.bind(this)\n          }\n        })\n\n        Object.defineProperty(this, _, {\n          value: _this\n        })\n\n        return _this\n      }\n    })\n\n    Object.getOwnPropertyNames(Klass.prototype).forEach((key) => {\n      if (key[0] != '_') return\n\n      const { value } = Object.getOwnPropertyDescriptor(Klass.prototype, key)\n\n      if (typeof value != 'function') return\n\n      const publicKey = key.slice(1)\n      internals[publicKey] = value\n      delete Klass.prototype[key]\n    })\n  }\n}\n\nexport default Internal\n","import { readFile, readFileSync } from 'fs'\nimport resolvePath from 'resolve'\n\nconst cache = {}\n\nconst requireText = (path) => {\n  path = resolvePath.sync(path)\n\n  return cache[path] = cache[path] || readFileSync(path).toString()\n}\n\nrequireText.promise = (path) => new Promise((resolve, reject) => {\n  resolvePath(path, (err, path) => {\n    if (err) {\n      return reject(err)\n    }\n\n    let content = cache[path]\n\n    if (content) {\n      return resolve(content)\n    }\n\n    readFile(path, (err, content) => {\n      if (err) {\n        return reject(err)\n      }\n\n      cache[path] = content = content.toString()\n\n      resolve(content)\n    })\n  })\n})\n\nexport default requireText\n","module.exports = require(\"resolve\");","import fetch from 'node-fetch'\nimport path from 'path'\nimport uglify from 'uglify-js'\nimport { fs, mkdirp } from '../libs'\nimport Writer from './writer'\n\nimport {\n  Internal,\n  escape,\n  freeText,\n  freeLint,\n  freeContext,\n  padLeft,\n  requireText,\n} from '../utils'\n\nconst _ = Symbol('_ScriptWriter')\n\n@Internal(_)\nclass ScriptWriter extends Writer {\n  get scripts() {\n    return this[_].scripts.slice()\n  }\n\n  get prefetch() {\n    return this[_].prefetch\n  }\n\n  set prefetch(prefetch) {\n    return this[_].prefetch = !!prefetch\n  }\n\n  get baseUrl() {\n    return this[_].baseUrl\n  }\n\n  set baseUrl(baseUrl) {\n    this[_].baseUrl = String(baseUrl)\n  }\n\n  constructor(options = {}) {\n    super()\n\n    this[_].scripts = []\n\n    this.baseUrl = options.baseUrl\n    this.prefetch = options.prefetch\n  }\n\n  async write(dir, options) {\n    await mkdirp(dir)\n\n    options = {\n      ...options,\n      prefetch: this.prefetch,\n    }\n\n    const indexFilePath = `${dir}/index.js`\n    const childFilePaths = [indexFilePath]\n\n    if (!options.prefetch) {\n      await fs.writeFile(indexFilePath, this[_].composeScriptLoader())\n      return childFilePaths\n    }\n\n    const scriptFileNames = this.scripts.map((script, index, { length }) => {\n      const fileName = padLeft(index, length / 10 + 1, 0) + '.js'\n      const filePath = `${dir}/${fileName}`\n      childFilePaths.push(filePath)\n\n      return fileName\n    })\n\n    const fetchingScripts = this.scripts.map(async (script, index) => {\n      const scriptFileName = scriptFileNames[index]\n\n      let code = script.type == 'code'\n        ? script.body\n        : /^http/.test(script.body)\n        ? await fetch(script.body)\n          .then(res => res.text())\n          .then(text => uglify.minify(text).code)\n        : requireText(`${this.baseUrl}/${script.body}`)\n      code = code.replace(/\\n\\/\\/# ?sourceMappingURL=.*\\s*$/, '')\n      code = freeContext(code)\n\n      return fs.writeFile(`${dir}/${scriptFileName}`, code)\n    })\n\n    const scriptsIndexContent = scriptFileNames.map((scriptFileName) => {\n      return `import './${scriptFileName}'`\n    }).join('\\n')\n\n    const writingIndex = fs.writeFile(\n      indexFilePath,\n      freeLint(scriptsIndexContent),\n    )\n\n    await Promise.all([\n      ...fetchingScripts,\n      writingIndex,\n    ])\n\n    return childFilePaths\n  }\n\n  setScript(src, content) {\n    let type\n    let body\n\n    if (src) {\n      type = 'src'\n      body = /^\\w+:\\/\\//.test(src) ? src : path.resolve('/', src)\n    }\n    else {\n      type = 'code'\n      body = uglify.minify(content).code\n    }\n\n    const exists = this[_].scripts.some((script) => {\n      return script.body == body\n    })\n\n    if (!exists) {\n      this[_].scripts.push({ type, body })\n    }\n  }\n\n  _composeScriptLoader() {\n    const scripts = this[_].scripts.map((script) => {\n      return freeText(`\n        {\n          type: '${script.type}',\n          body: '${escape(script.body, \"'\")}',\n        },\n      `)\n    }).join('\\n')\n\n    return freeLint(`\n      const scripts = [\n        ==>${scripts}<==\n      ]\n\n      const loadingScripts = scripts.reduce((loaded, script) => loaded.then(() => {\n        const scriptEl = document.createElement('script')\n        scriptEl.type = 'text/javascript'\n        let loading\n\n        if (script.type == 'src') {\n          scriptEl.src = script.body\n\n          loading = new Promise((resolve, reject) => {\n            scriptEl.onload = resolve\n            scriptEl.onerror = reject\n          })\n        }\n        else {\n          scriptEl.innerHTML = script.body\n\n          loading = Promise.resolve()\n        }\n\n        document.head.appendChild(scriptEl)\n\n        return loading\n      }), Promise.resolve())\n\n      export default loadingScripts\n    `)\n  }\n}\n\nexport default ScriptWriter\n","module.exports = require(\"node-fetch\");","import CleanCSS from 'clean-css'\nimport fetch from 'node-fetch'\nimport path from 'path'\nimport { fs, mkdirp } from '../libs'\nimport Writer from './writer'\n\nimport {\n  Internal,\n  escape,\n  freeText,\n  freeLint,\n  padLeft,\n  requireText,\n} from '../utils'\n\nconst _ = Symbol('_StyleWriter')\nconst cleanCSS = new CleanCSS({\n  rebaseTo: '..'\n})\n\n@Internal(_)\nclass StyleWriter extends Writer {\n  get styles() {\n    return this[_].styles.slice()\n  }\n\n  get prefetch() {\n    return this[_].prefetch\n  }\n\n  set prefetch(prefetch) {\n    return this[_].prefetch = !!prefetch\n  }\n\n  get baseUrl() {\n    return this[_].baseUrl\n  }\n\n  set baseUrl(baseUrl) {\n    this[_].baseUrl = String(baseUrl)\n  }\n\n  get source() {\n    return this[_].source\n  }\n\n  set source(source) {\n    this[_].source = String(source)\n  }\n\n  constructor(options = {}) {\n    super()\n\n    this[_].styles = []\n\n    this.baseUrl = options.baseUrl\n    this.prefetch = options.prefetch\n    this.source = options.srouce\n  }\n\n  async write(dir, options) {\n    await mkdirp(dir)\n\n    options = {\n      ...options,\n      prefetch: this.prefetch,\n    }\n\n    const indexFilePath = `${dir}/index.js`\n    const childFilePaths = [indexFilePath]\n\n    if (!options.prefetch) {\n      await fs.writeFile(indexFilePath, this[_].composeStyleLoader())\n      return childFilePaths\n    }\n\n    const styleFileNames = this.styles.map((style, index, { length }) => {\n      const fileName = padLeft(index, length / 10 + 1, 0) + '.css'\n      const filePath = `${dir}/${fileName}`\n      childFilePaths.push(filePath)\n\n      return fileName\n    })\n\n    const fetchingStyles = this.styles.map(async (style, index) => {\n      const styleFileName = styleFileNames[index]\n\n      const sheet = style.type == 'sheet'\n        ? style.body\n        : /^http/.test(style.body)\n          ? await fetch(style.body).then(res => res.text())\n          : await requireText.promise(`${this.baseUrl}/${style.body}`)\n\n      return fs.writeFile(`${dir}/${styleFileName}`, this[_].transformSheet(sheet))\n    })\n\n    const stylesIndexContent = styleFileNames.map((styleFileName) => {\n      return `import './${styleFileName}'`\n    }).join('\\n')\n\n    const writingIndex = fs.writeFile(\n      indexFilePath,\n      freeLint(stylesIndexContent),\n    )\n\n    await Promise.all([\n      ...fetchingStyles,\n      writingIndex,\n    ])\n\n    return childFilePaths\n  }\n\n  setStyle(href, content) {\n    let type\n    let body\n\n    if (href) {\n      type = 'href'\n      body = /^\\w+:\\/\\//.test(href) ? href : path.resolve('/', href)\n    }\n    else {\n      type = 'sheet'\n      body = content\n    }\n\n    const exists = this[_].styles.some((style) => {\n      return style.body == body\n    })\n\n    if (!exists) {\n      this[_].styles.push({ type, body })\n    }\n  }\n\n  _composeStyleLoader() {\n    this[_].styles.forEach((style) => {\n      if (style.type == 'sheet') {\n        style.body = this[_].transformSheet(style.body)\n      }\n    })\n\n    const styles = this[_].styles.map((style) => {\n      return freeText(`\n        {\n          type: '${style.type}',\n          body: '${escape(style.body, \"'\")}',\n        },\n      `)\n    }).join('\\n')\n\n    return freeLint(`\n      const styles = [\n        ==>${styles}<==\n      ]\n\n      const loadingStyles = styles.map((style) => {\n        let styleEl\n        let loading\n\n        if (style.type == 'href') {\n          styleEl = document.createElement('link')\n\n          loading = new Promise((resolve, reject) => {\n            styleEl.onload = resolve\n            styleEl.onerror = reject\n          })\n\n          styleEl.rel = 'stylesheet'\n          styleEl.type = 'text/css'\n          styleEl.href = style.body\n        }\n        else {\n          styleEl = document.createElement('style')\n          styleEl.type = 'text/css'\n          styleEl.innerHTML = style.body\n\n          loading = Promise.resolve()\n        }\n\n        document.head.appendChild(styleEl)\n\n        return loading\n      })\n    `)\n  }\n\n  // Will minify and encapsulate classes\n  _transformSheet(sheet) {\n    sheet = cleanCSS.minify(sheet).styles\n\n    // Make URLs absolute so webpack won't throw any errors\n    return sheet.replace(/url\\(([^)]+)\\)/g, (match, url) => {\n      if (/^(.+):\\/\\//.test(url)) return match\n\n      url = path.resolve('/', url)\n      return `url(${url})`\n    })\n  }\n}\n\nexport default StyleWriter\n","module.exports = require(\"clean-css\");"],"sourceRoot":""}