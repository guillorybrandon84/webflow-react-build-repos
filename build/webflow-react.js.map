{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.js","webpack:///external \"cheerio\"","webpack:///external \"path\"","webpack:///./src/git.js","webpack:///external \"execa\"","webpack:///external \"rimraf\"","webpack:///./src/libs/index.js","webpack:///./src/libs/fs.js","webpack:///external \"fs\"","webpack:///external \"util\"","webpack:///./src/libs/mkdirp.js","webpack:///external \"fs-extra\"","webpack:///./src/libs/ncp.js","webpack:///./src/libs/reread.js","webpack:///external \"recursive-readdir\"","webpack:///./src/libs/rimraf.js","webpack:///./src/writers/index.js","webpack:///./src/writers/writer.js","webpack:///./src/writers/view-writer.js","webpack:///external \"htmltojsx\"","webpack:///external \"statuses\"","webpack:///external \"uglify-js\"","webpack:///./src/raw/index.js","webpack:///./src/utils/index.js","webpack:///./src/utils/internal.js","webpack:///./src/utils/requireText.js","webpack:///external \"resolve\"","webpack:///./src/writers/script-writer.js","webpack:///external \"node-fetch\"","webpack:///./src/writers/style-writer.js","webpack:///external \"clean-css\""],"names":["defaultPublicSubFolders","transpile","config","inputFiles","outputFiles","Promise","all","fs","readdir","input","then","files","git","removeWFRFiles","push","e","console","log","folders","filter","path","extname","file","length","includes","map","folder","htmlFiles","publicSubDirs","scriptWriter","baseUrl","prefetch","styleWriter","source","srouce","transpilingHTMLFiles","transpileHTMLFile","htmlFile","viewWriters","writingFiles","ViewWriter","writeAll","output","src","views","components","meta","styles","controllers","paths","write","makingPublicDir","makePublicDir","add","commit","html","readFile","toString","$","cheerio","load","$head","$body","splitter","split","viewWriter","name","slice","join","parent","isComponent","setScripts","setStyles","setHTML","publicDir","public","ncp","publicSubDir","filePaths","reread","relativePaths","relativePath","relative","filePath","$scripts","find","each","i","script","$script","setScript","attr","_","stylesDir","$styles","style","$style","setStyle","$div","orPathRel","from","to","replace","stdout","root","execa","resolve","unstaged","results","reduce","concat","Boolean","message","stdio","diffFiles","rimraf","res","mkdir","promisify","stat","unlink","writeFile","mkdirp","copy","remove","Writer","Error","Symbol","htmltojsx","createClass","adjustImagesToRoot","removeHtmlFromLinks","Internal","dir","componentDir","metaDir","ctrlsDir","indexFilePath","helpersFilePath","routesFilePath","childFilePaths","routes","className","toLowerCase","index","leanViewWriters","vw","forEach","writtingRoutes","freeLint","writingIndex","writingHelpers","raw","viewHelpers","String","comp","children","isNaN","Number","statuses","words","splitWords","Object","assign","ctrlClassName","metaClassName","elName","word","el","$el","$afEl","insertAfter","child","scripts","type","test","body","sockets","socketName","tagName","socketAttrs","socketAttr","jsx","convert","trim","bindJSX","constructor","options","writingChildren","isNestedComponent","writingSelf","compose","href","content","exists","some","sheets","css","sheet","escape","_compose","compDir","shouldHaveStyles","composeChildImports","composeProxiesDefault","_composeStyleImports","_composeProxiesDefault","socket","defaultType","_composeChildImports","imported","imports","imp","_composeScriptsDeclerations","minified","uglify","minify","code","_composeScriptsInvocations","invoke","freeScope","freeText","camelize","text","letter","toUpperCase","self","isList","RegExp","exec","mergeProps","match","base","sock","attrs","filename","__dirname","requireText","str","quote","importantizeCSS","Array","baseIndent","line","lines","minIndent","currIndent","Infinity","freeContext","context","args","callArgs","keys","upperFirst","substr","padLeft","char","parseInt","TypeError","Klass","internals","defineProperty","prototype","get","_this","key","value","bind","getOwnPropertyNames","getOwnPropertyDescriptor","publicKey","cache","resolvePath","sync","readFileSync","promise","reject","err","ScriptWriter","composeScriptLoader","scriptFileNames","fileName","fetchingScripts","scriptFileName","fetch","scriptsIndexContent","_composeScriptLoader","cleanCSS","rebaseTo","StyleWriter","composeStyleLoader","styleFileNames","fetchingStyles","styleFileName","transformSheet","stylesIndexContent","_composeStyleLoader","_transformSheet","url"],"mappings":"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","file":"webflow-react.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import cheerio from 'cheerio';\nimport path from 'path';\nimport git from './git';\nimport { fs, ncp, reread } from './libs';\nimport { ViewWriter, ScriptWriter, StyleWriter } from './writers';\n\nconst defaultPublicSubFolders = ['css', 'fonts', 'images', 'js'];\n\nexport const transpile = async config => {\n    let inputFiles;\n    let outputFiles = [];\n    try {\n        await Promise.all([\n            fs.readdir(config.input).then(files => {\n                inputFiles = files;\n            }),\n            git.removeWFRFiles(config).then(files => {\n                outputFiles.push(...files);\n            }),\n        ]);\n    } catch (e) {\n        console.log(e);\n    }\n\n    const folders = inputFiles.filter(\n        file =>\n            !path.extname(file).length &&\n            !defaultPublicSubFolders.includes(file)\n    );\n    try {\n        await Promise.all(\n            folders.map(folder =>\n                fs.readdir(`${config.input}/${folder}`).then(files => {\n                    inputFiles = [\n                        ...(inputFiles || []),\n                        ...(files || []).map(file => `${folder}/${file}`),\n                    ];\n                })\n            )\n        );\n    } catch (e) {\n        console.log(e);\n    }\n    const htmlFiles = inputFiles.filter(file => path.extname(file) == '.html');\n\n    const publicSubDirs = inputFiles.filter(\n        file => !path.extname(file) && defaultPublicSubFolders.includes(file)\n    );\n\n    const scriptWriter = new ScriptWriter({\n        baseUrl: config.input,\n        prefetch: config.prefetch,\n    });\n\n    const styleWriter = new StyleWriter({\n        baseUrl: config.input,\n        prefetch: config.prefetch,\n        source: config.srouce,\n    });\n\n    const transpilingHTMLFiles = htmlFiles.map(htmlFile => {\n        return transpileHTMLFile(config, htmlFile, scriptWriter, styleWriter);\n    });\n    const viewWriters = await Promise.all(transpilingHTMLFiles);\n    const writingFiles = Promise.all([\n        ViewWriter.writeAll(\n            viewWriters,\n            config.output.src.views,\n            config.output.src.components,\n            config.output.src.meta,\n            config.output.src.styles,\n            config.output.src.controllers\n        ).then(paths => outputFiles.push(...paths)),\n        // scriptWriter.write(\n        //   config.output.src.scripts\n        // ).then((paths) => outputFiles.push(...paths)),\n        styleWriter\n            .write(config.output.src.styles)\n            .then(paths => outputFiles.push(...paths)),\n    ]);\n\n    const makingPublicDir = makePublicDir(config, publicSubDirs).then(paths =>\n        outputFiles.push(...paths)\n    );\n    try {\n        await Promise.all([writingFiles, makingPublicDir]);\n    } catch (e) {\n        console.log(e);\n    }\n\n    return git.add(outputFiles, config).then(files => {\n        return git.commit(files, 'Updated');\n    });\n};\n\nconst transpileHTMLFile = async (\n    config,\n    htmlFile,\n    scriptWriter,\n    styleWriter\n) => {\n    const html = (await fs.readFile(`${config.input}/${htmlFile}`)).toString();\n    const $ = cheerio.load(html);\n    const $head = $('head');\n\n    if (!!scriptWriter && !!styleWriter) {\n        // pass\n    }\n\n    const $body = $('body');\n    const splitter = htmlFile.split('/');\n    const viewWriter = new ViewWriter({\n        name: splitter[htmlFile.split('/').length - 1]\n            .split('.')\n            .slice(0, -1)\n            .join('.'),\n        baseUrl: config.baseUrl,\n        parent:\n            htmlFile.split('/')[0] === htmlFile ? null : htmlFile.split('/')[0],\n        isComponent: false,\n        source: config.source,\n    });\n\n    setScripts(scriptWriter, $head, $);\n\n    setStyles(viewWriter, styleWriter, $head, $, config.output.src.styles);\n    setHTML(viewWriter, $body, $);\n\n    return viewWriter;\n};\n\nconst makePublicDir = async (config, publicSubDirs) => {\n    const publicDir = config.output.public;\n    await Promise.all(\n        publicSubDirs.map(publicSubDir => {\n            return ncp(\n                `${config.input}/${publicSubDir}`,\n                `${publicDir}/${publicSubDir}`\n            );\n        })\n    );\n\n    // Resolving relative paths\n    const filePaths = await reread(config.input);\n\n    const relativePaths = filePaths.map(filePath => {\n        const relativePath = path.relative(config.input, filePath);\n\n        return `${publicDir}/${relativePath}`;\n    });\n\n    return relativePaths;\n};\n\nconst setScripts = (scriptWriter, $head) => {\n    const $scripts = $head.find('script[type=\"text/javascript\"]');\n\n    $scripts.each((i, script) => {\n        const $script = $head.find(script);\n\n        scriptWriter.setScript($script.attr('src'), $script.html());\n    });\n};\n\nconst setStyles = (viewWriter, styleWriter, $head, _, stylesDir) => {\n    let $styles;\n\n    $styles = $head.find('link[rel=\"stylesheet\"][type=\"text/css\"]');\n\n    $styles.each((i, style) => {\n        const $style = $head.find(style);\n\n        viewWriter.setStyle($style.attr('href'), $style.html(), stylesDir);\n        styleWriter.setStyle($style.attr('href'), $style.html());\n    });\n\n    $styles = $head.find('style');\n\n    $styles.each((i, style) => {\n        const $style = $head.find(style);\n\n        viewWriter.setStyle($style.attr('href'), $style.html(), stylesDir);\n        styleWriter.setStyle($style.attr('href'), $style.html());\n    });\n};\n\nconst setHTML = (viewWriter, $body, $) => {\n    // Create a wrap around $body so we can inherit its style without actually\n    // using a <body> tag\n    const $div = $('<div>');\n    $div.html($body.html());\n    $div.attr($body.attr());\n    viewWriter.html = $.html($div);\n};\n","module.exports = require(\"cheerio\");","module.exports = require(\"path\");","import execa from 'execa';\nimport path from 'path';\nimport rimraf from 'rimraf';\n// import { fs } from \"./libs\";\n\n// Attempt at supporting windows by monkey patching path.relative to prevent backslashes.\nconst orPathRel = path.relative;\npath.relative = (from, to) => orPathRel(from, to).replace(/\\\\/gi, '/');\n\n// Will add given files and will ignore those who aren't exist\nexport const add = async (files, config) => {\n    const { stdout: root } = await execa('git', [\n        'rev-parse',\n        '--show-toplevel',\n    ]);\n\n    files = files.map(file => path.resolve(root, file));\n\n    let unstaged = await Promise.all([\n        execa('git', ['diff', '--name-only']),\n        execa('git', ['ls-files', '--others', '--exclude-standard']),\n    ]).then(results => {\n        return results.reduce((unstaged, { stdout }) => {\n            return unstaged.concat(stdout.split('\\n').filter(Boolean));\n        }, []);\n    });\n\n    unstaged = unstaged.map(file => path.resolve(root, file));\n    files = files.filter(file => unstaged.includes(file));\n\n    await execa('git', [\n        'add',\n        ...files,\n        `${config.output.src.root}/routes.js`,\n        config.output.src.views,\n        config.output.src.components,\n        config.output.src.styles,\n        config.output.public,\n    ]);\n\n    return [\n        ...files,\n        `${config.output.src.root}/routes.js`,\n        config.output.src.views,\n        config.output.src.components,\n        config.output.src.styles,\n        config.output.public,\n    ];\n};\n\n// Will commit changes, and if files not exist, will print status\nexport const commit = (files, message, stdio = 'inherit') => {\n    if (files && files.length)\n        try {\n            return execa(\n                'git',\n                ['commit', '-m', `Webflow React: ${message}`, '--allow-empty'],\n                {\n                    stdio,\n                }\n            );\n        } catch (e) {\n            // Probably no changes were made\n        }\n\n    return execa('git', ['status'], {\n        stdio,\n    });\n};\n\nexport const removeWFRFiles = async config => {\n    const { stdout: diffFiles } = await execa('git', ['diff', '--name-only']);\n\n    if (diffFiles) {\n        // throw Error(\n        //   [\n        //     \"Cannot transpile: Your index contains uncommitted changes.\",\n        //     \"Please commit or stash them.\"\n        //   ].join(\"\\n\")\n        // );\n        console.log(\n            [\n                '=========',\n                'Warning: You have uncommitted changes!',\n                '=========',\n            ].join('\\n')\n        );\n    }\n\n    // let { stderr, stdout: hash } = await execa(\"git\", [\n    //   \"log\",\n    //   \"-1\",\n    //   \"--format=%H\",\n    //   `--grep=webflow-react: Updated`\n    // ]);\n\n    // // Probably git is not initialized\n    // if (stderr) throw Error(stderr);\n    // // No previous migrations found\n    // if (!hash) return [];\n\n    // List all files but deleted ones\n    // let { stdout: files } = await execa(\"git\", [\n    //   \"diff\",\n    //   \"--name-only\",\n    //   \"--diff-filter=ACMRTUXB\",\n    //   `${hash}~1`,\n    //   hash\n    // ]);\n    // files = files.split(\"\\n\").filter(Boolean);\n    // console.log(files)\n\n    // const { stdout: root } = await execa(\"git\", [\"rev-parse\", \"--show-toplevel\"]);\n\n    await Promise.all([\n        // ...files.map(async file => {\n        //   return fs.unlink(`${root}/${file}`);\n        // }),\n\n        new Promise(res =>\n            rimraf(`${config.output.src.root}/routes.js`, () => res())\n        ),\n\n        new Promise(res => rimraf(config.output.src.views, () => res())),\n        new Promise(res => rimraf(config.output.src.components, () => res())),\n        new Promise(res => rimraf(config.output.src.styles, () => res())),\n    ]);\n\n    // return [...files||[]];\n    return [\n        `${config.output.src.root}/routes.js`,\n        config.output.src.views,\n        config.output.src.components,\n        config.output.src.styles,\n        config.output.public,\n    ];\n};\n\nexport default {\n    add,\n    commit,\n    removeWFRFiles,\n};\n","module.exports = require(\"execa\");","module.exports = require(\"rimraf\");","export { default as fs } from './fs';\nexport { default as mkdirp } from './mkdirp';\nexport { default as ncp } from './ncp';\nexport { default as reread } from './reread';\nexport { default as rimraf } from './rimraf';\n","import fs from 'fs';\nimport { promisify } from 'util';\n\nexport const mkdir = promisify(fs.mkdir);\nexport const readdir = promisify(fs.readdir);\nexport const readFile = promisify(fs.readFile);\nexport const stat = promisify(fs.stat);\nexport const unlink = promisify(fs.unlink);\nexport const writeFile = promisify(fs.writeFile);\n\nexport default {\n    mkdir,\n    readdir,\n    readFile,\n    stat,\n    unlink,\n    writeFile,\n};\n","module.exports = require(\"fs\");","module.exports = require(\"util\");","import fs from 'fs-extra';\nimport { promisify } from 'util';\n\nexport default promisify(fs.mkdirp);\n","module.exports = require(\"fs-extra\");","import fs from 'fs-extra';\nimport { promisify } from 'util';\n\nexport default promisify(fs.copy);\n","import reread from 'recursive-readdir';\nimport { promisify } from 'util';\n\nexport default promisify(reread);\n","module.exports = require(\"recursive-readdir\");","import fs from 'fs-extra';\nimport { promisify } from 'util';\n\nexport default promisify(fs.remove);\n","export { default as Writer } from './writer';\nexport { default as ViewWriter } from './view-writer';\nexport { default as ScriptWriter } from './script-writer';\nexport { default as StyleWriter } from './style-writer';\n","class Writer {\n    write() {\n        throw Error('Writer.write() must be implemented');\n    }\n}\n\nexport default Writer;\n","import cheerio from 'cheerio';\nimport HTMLtoJSX from 'htmltojsx';\nimport path from 'path';\nimport statuses from 'statuses';\nimport uglify from 'uglify-js';\nimport { fs, mkdirp } from '../libs';\nimport raw from '../raw';\nimport Writer from './writer';\n\nconst writingFiles = [];\n\n// Attempt at supporting windows by monkey patching path.relative to prevent backslashes.\nconst orPathRel = path.relative;\npath.relative = (from, to) => orPathRel(from, to).replace(/\\\\/gi, '/');\n\nimport {\n    escape,\n    freeLint,\n    freeScope,\n    freeText,\n    Internal,\n    splitWords,\n    upperFirst,\n} from '../utils';\n\nconst _ = Symbol('_ViewWriter');\nconst htmltojsx = new HTMLtoJSX({ createClass: false });\n\n// const flattenChildren = (children = [], flatten = []) => {\n//   children.forEach(child => {\n//     flattenChildren(child[_].children, flatten);\n//   });\n\n//   flatten.push(...children);\n\n//   return flatten;\n// };\n\nconst adjustImagesToRoot = html => html.replace(/src=\"/gi, 'src=\"/');\n// const removeHtmlFromLinks = (html) => adjustImagesToRoot(html.replace('index.html', '').replace(/\\.html/ig, '').replace(/href=\"/ig, 'href=\"/'))\nconst removeHtmlFromLinks = html =>\n    adjustImagesToRoot(html.replace('index.html', '').replace(/\\.html/gi, ''));\n\n@Internal(_)\nclass ViewWriter extends Writer {\n    static async writeAll(\n        viewWriters,\n        dir,\n        componentDir,\n        metaDir,\n        stylesDir,\n        ctrlsDir\n    ) {\n        await mkdirp(dir);\n        await mkdirp(componentDir);\n        await mkdirp(stylesDir);\n        await mkdirp(metaDir);\n        const indexFilePath = `${dir}/index.js`;\n        const helpersFilePath = `${dir}/../helpers.js`;\n        const routesFilePath = `${dir}/../routes.js`;\n        const childFilePaths = [indexFilePath, helpersFilePath, routesFilePath];\n        ctrlsDir = path.relative(dir, ctrlsDir);\n        const routes = `\nimport React from 'react';\nimport { Route } from 'react-router-dom';\nimport * as Views from './views';\n\nexport default () => [\n  <Route key=\"route_index\" path=\"/\" component={Views.IndexView} exact />,\n  ${viewWriters\n      .map(\n          viewWriter =>\n              `<Route key=\"route_${viewWriter.className.replace(\n                  /view/gi,\n                  ''\n              )}\" path=\"${\n                  viewWriter.parent ? `/${viewWriter.parent}` : ''\n              }/${viewWriter.className\n                  .replace(/view/gi, '')\n                  .split(/(?=[A-Z])/)\n                  .join('-')\n                  .toLowerCase()}\" component={Views.${\n                  viewWriter.className\n              }} exact />`\n      )\n      .join(',\\n  ')}\n]`;\n        const index = viewWriters\n            .map(viewWriter => {\n                return `export { default as ${viewWriter.className} } from './${viewWriter.className}'`;\n            })\n            .join('\\n');\n\n        const leanViewWriters = [];\n        // viewWriters = flattenChildren(viewWriters);\n\n        for (const viewWriter of viewWriters) {\n            if (\n                !leanViewWriters.find(\n                    vw => vw.className === viewWriter.className\n                )\n            ) {\n                leanViewWriters.push(viewWriter);\n            }\n        }\n        leanViewWriters.forEach(async viewWriter => {\n            const filePaths = await viewWriter.write(\n                dir,\n                componentDir,\n                metaDir,\n                stylesDir,\n                ctrlsDir\n            );\n            childFilePaths.push(...filePaths);\n        });\n\n        const writtingRoutes = fs.writeFile(routesFilePath, freeLint(routes));\n        const writingIndex = fs.writeFile(indexFilePath, freeLint(index));\n        const writingHelpers = fs.writeFile(helpersFilePath, raw.viewHelpers);\n\n        await Promise.all([writingIndex, writingHelpers, writtingRoutes]);\n        return childFilePaths;\n    }\n\n    get baseUrl() {\n        return this[_].baseUrl;\n    }\n\n    set baseUrl(baseUrl) {\n        this[_].baseUrl = String(baseUrl);\n    }\n\n    set isComponent(comp) {\n        this[_].isComponent = comp;\n    }\n\n    get isComponent() {\n        return this[_].isComponent;\n    }\n\n    get children() {\n        return this[_].children.slice();\n    }\n\n    set name(name) {\n        if (!isNaN(Number(name))) {\n            name = statuses[name];\n        }\n\n        const words = splitWords(name);\n        Object.assign(this[_], {\n            ctrlClassName: words\n                .concat('controller')\n                .map(upperFirst)\n                .join(''),\n            metaClassName: words\n                .concat('meta')\n                .map(upperFirst)\n                .join(''),\n            className: words\n                .concat('view')\n                .map(upperFirst)\n                .join(''),\n            elName: words.map(word => word.toLowerCase()).join('-'),\n            name: words\n                .concat('view')\n                .map(word => word.toLowerCase())\n                .join('-'),\n        });\n    }\n\n    get name() {\n        return this[_].name;\n    }\n\n    get ctrlClassName() {\n        return this[_].ctrlClassName;\n    }\n\n    get metaClassName() {\n        return this[_].metaClassName;\n    }\n\n    get className() {\n        return this[_].className;\n    }\n\n    get elName() {\n        return this[_].elName;\n    }\n\n    set html(html) {\n        if (!html) {\n            this[_].html = '';\n            this[_].children = [];\n            return;\n        }\n\n        const children = (this[_].children = []);\n        const $ = cheerio.load(html);\n\n        // console.log(this[_].className, ($(\"[wfr-c]\") || []).length)\n\n        let el = $('[wfr-c]')[0];\n        while (el) {\n            const $el = $(el);\n            const elName = $el.attr('wfr-c');\n            const $afEl = $(`<af-${elName}></af-${elName}>`);\n            // const sock = $el.attr(\"wfr-d\");\n            // $afEl.attr(\"wfr-d\", $el.attr(\"wfr-d\"));\n            $el.attr('wfr-c', null);\n            // $el.attr(\"wfr-d\", null);\n            $afEl.insertAfter($el);\n            // if (sock !== null && sock !== undefined) {\n            //   $el.prepend(`<span wfr-d=\"${sock}\">`);\n            //   $el.append('</span>');\n            // }\n            $el.remove();\n\n            const child = new ViewWriter({\n                name: elName,\n                html: $.html($el),\n                baseUrl: this.baseUrl,\n                styles: this.styles,\n                isComponent: true,\n            });\n\n            children.push(child);\n            el = $('[wfr-c]')[0];\n        }\n\n        // Apply ignore rules AFTER child elements were plucked\n        $('[wfr-ignore]').remove();\n        // Empty inner HTML\n        $('[wfr-empty]')\n            .html('')\n            .attr('wfr-empty', null);\n\n        this[_].scripts = [];\n\n        // Set inline scripts. Will be loaded once component has been mounted\n        $('script').each((i, script) => {\n            const $script = $(script);\n            const src = $script.attr('src');\n            const type = $script.attr('type');\n\n            // We're only interested in JavaScript script tags\n            if (type && !/javascript/i.test(type)) return;\n\n            if (src) {\n                this[_].scripts.push({\n                    type: 'src',\n                    body: src,\n                });\n            } else {\n                this[_].scripts.push({\n                    type: 'code',\n                    body: $script.html(),\n                });\n            }\n\n            $script.remove();\n        });\n\n        const $body = $('body');\n        html = $body.html();\n\n        this[_].html = html;\n\n        const sockets = (this[_].sockets = []);\n\n        // Find root sockets\n        $('[wfr-d]').each((i, el) => {\n            const $el = $(el);\n            const socketName = $el.attr('wfr-d');\n            sockets.push(socketName);\n\n            $el.attr('wfr-d', null);\n            // Workaround would help identify the closing tag\n            el.tagName += `-wfr-d-${socketName}`;\n        });\n\n        // Attach socket attributes.\n        $('[wfr-a]').each((i, el) => {\n            const $el = $(el);\n            const socketAttrs = $el.attr('wfr-a').split(',');\n\n            socketAttrs.forEach(socketAttr => {\n                sockets.push('%string%' + socketAttr);\n\n                // Workaround to identify socket attributes.\n                $el.attr(\n                    'wfr-a-' + socketAttr,\n                    \"{ proxies['\" + socketAttr + \"'] }\"\n                );\n            });\n\n            $el.attr('wfr-a', null);\n        });\n\n        // Refetch modified html\n        html = $body.html();\n\n        // Transforming HTML into JSX\n        let jsx = htmltojsx.convert(removeHtmlFromLinks(html)).trim();\n\n        // Bind controller to view\n        this[_].jsx = bindJSX(this, jsx, children);\n    }\n\n    get scripts() {\n        return this[_].scripts ? this[_].scripts.slice() : [];\n    }\n\n    get styles() {\n        return this[_].styles.slice();\n    }\n\n    get html() {\n        return this[_].html;\n    }\n\n    get jsx() {\n        return this[_].jsx;\n    }\n\n    get sockets() {\n        return this[_].sockets && [...this[_].sockets];\n    }\n\n    get source() {\n        return this[_].source;\n    }\n\n    set source(source) {\n        this[_].source = String(source);\n    }\n\n    constructor(options) {\n        super();\n\n        this[_].children = [];\n        this[_].styles = options.styles || [];\n\n        this.name = options.name;\n        this.parent = options.parent;\n        this.isComponent = options.isComponent;\n        this.html = options.html;\n        this.source = options.source;\n    }\n\n    async write(dir, componentDir, metaDir, stylesDir, ctrlsDir) {\n        const filePath = `${dir}/${this.className}.js`;\n        const childFilePaths = [filePath];\n        const writingChildren = this[_].children.map(async child => {\n            if (!writingFiles.includes(child.className)) {\n                writingFiles.push(child.className);\n                const filePaths = await child.write(\n                    componentDir,\n                    componentDir,\n                    metaDir,\n                    stylesDir,\n                    ctrlsDir\n                );\n                childFilePaths.push(...filePaths);\n            }\n        });\n        const isNestedComponent = dir === componentDir;\n        let writingSelf;\n\n        if (!writingFiles.includes(`${this.className}.js`)) {\n            try {\n                await fs.readFile(`${dir}/${this.className}.js`);\n            } catch (e) {\n                // pass\n                writingSelf = fs.writeFile(\n                    `${dir}/${this.className}.js`,\n                    this[_].compose(\n                        path.relative(dir, componentDir),\n                        path.relative(dir, metaDir),\n                        path.relative(dir, stylesDir),\n                        ctrlsDir,\n                        !isNestedComponent\n                    )\n                );\n            }\n        }\n\n        try {\n            await Promise.all([...writingChildren, writingSelf]);\n        } catch (e) {\n            console.log(e);\n        }\n        return childFilePaths;\n    }\n\n    async setStyle(href, content, stylesDir) {\n        let type;\n        let body;\n\n        if (href) {\n            type = 'href';\n            body = /^\\w+:\\/\\//.test(href) ? href : path.resolve('/', href);\n        } else {\n            type = 'sheet';\n            body = content;\n        }\n\n        const exists = this[_].styles.some(style => {\n            return style.body == body;\n        });\n\n        if (!exists) {\n            this[_].styles.push({ type, body });\n        }\n\n        const sheets = this[_].styles\n            .map(({ type, body }) => {\n                return type == 'sheet' && body;\n            })\n            .filter(Boolean);\n\n        let css = '';\n\n        // css += hrefs.map((href) => {\n        //   return `@import url(${href});`\n        // }).join('\\n')\n\n        css += '\\n\\n';\n\n        css += sheets\n            .map(sheet => {\n                return sheet;\n            })\n            .join('\\n\\n');\n        if (!stylesDir || !css.length) return true;\n        try {\n            await mkdirp(stylesDir);\n            await fs.writeFile(\n                `${stylesDir}/${this.className}.css`,\n                escape(css.trim())\n            );\n        } catch (e) {\n            console.log(e);\n        }\n    }\n\n    _compose(compDir, metaDir, stylesDir, ctrlsDir, shouldHaveStyles = true) {\n        return freeLint(`\n      import React from 'react'\n      import { createScope, map, transformProxies } from '../helpers'\n      ${shouldHaveStyles ? `import \"${stylesDir}/${this.className}.css\"` : ''}\n      ==>${this[_].composeChildImports(compDir)}<==\n\n      let Controller\n\n      class ${this.className} extends React.Component {\n        static get Controller() {\n          if (Controller) return Controller\n\n          try {\n            Controller = require('${ctrlsDir}/${this.ctrlClassName}')\n            Controller = Controller.default || Controller\n\n            return Controller\n          }\n          catch (e) {\n            if (e.code == 'MODULE_NOT_FOUND') {\n              Controller = ${this.className}\n\n              return Controller\n            }\n\n            throw e\n          }\n        }\n\n        render() {\n          const proxies = Controller !== ${\n              this.className\n          } ? transformProxies(this.props) : {\n            ==>${this[_].composeProxiesDefault()}<==\n          }\n\n          ${\n              this[_].isComponent\n                  ? ''\n                  : `\n          let Metadata\n          try {\n            Metadata = require(\"${metaDir}/${this.metaClassName}\")\n            Metadata = Metadata.default || Metadata\n          } catch (e) {\n            // pass\n            Metadata = null;\n          }\n          try {\n            Metadata = require(\"${metaDir}/defaultMeta\")\n            Metadata = Metadata.default || Metadata\n          } catch (e) {\n            // pass\n            Metadata = null;\n          }\n          `\n          }\n\n\n          return (\n            <React.Fragment>\n              ${\n                  !this[_].isComponent\n                      ? '{Metadata ? <Metadata {...this.props} /> : null}'\n                      : ''\n              }\n              ==>${this.jsx}<==\n            </React.Fragment>\n          )\n        }\n      }\n\n      export default ${this.className}\n    `);\n    }\n\n    _composeStyleImports() {\n        // const hrefs = this[_].styles.map(({ type, body }) => {\n        //   return type == 'href' && body\n        // }).filter(Boolean)\n\n        const sheets = this[_].styles\n            .map(({ type, body }) => {\n                return type == 'sheet' && body;\n            })\n            .filter(Boolean);\n\n        let css = '';\n\n        // css += hrefs.map((href) => {\n        //   return `@import url(${href});`\n        // }).join('\\n')\n\n        css += '\\n\\n';\n\n        css += sheets\n            .map(sheet => {\n                return sheet;\n            })\n            .join('\\n\\n');\n\n        return escape(css.trim());\n    }\n\n    _composeProxiesDefault() {\n        return this[_].sockets\n            .map(socket => {\n                let defaultType = '[]';\n\n                if (socket.includes('%string%')) {\n                    socket = socket.replace('%string%', '');\n                    defaultType = \"''\";\n                }\n\n                return `'${socket}': ` + defaultType + `,`;\n            })\n            .join('\\n');\n    }\n\n    _composeChildImports(compDir) {\n        if (!compDir) {\n            compDir = '.';\n        }\n        const imported = [];\n\n        const imports = this[_].children\n            .map(child => {\n                if (!imported.includes(child.className)) {\n                    imported.push(child.className);\n                    return `import ${child.className} from '${compDir}/${child.className}'`;\n                }\n            })\n            .filter(imp => !!imp && imp.length);\n\n        // Line skip\n        imports.push('');\n\n        return imports.join('\\n');\n    }\n\n    _composeScriptsDeclerations() {\n        return this[_].scripts\n            .map(script => {\n                if (script.type == 'src') {\n                    return `fetch(\"${script.body}\").then(body => body.text()),`;\n                }\n\n                const minified = uglify.minify(script.body).code;\n                // Unknown script format ??? fallback to maxified version\n                const code = minified || script.body;\n\n                return `Promise.resolve(\"${escape(code)}\"),`;\n            })\n            .join('\\n');\n    }\n\n    _composeScriptsInvocations() {\n        if (!this[_].scripts) return '';\n\n        const invoke = freeScope('eval(arguments[0])', 'window', {\n            script: null,\n        });\n\n        return freeText(`\n      scripts.concat(Promise.resolve()).reduce((loaded, loading) => {\n        return loaded.then((script) => {\n          ==>${invoke}<==\n\n          return loading\n        })\n      })\n    `);\n    }\n}\n\nfunction camelize(text) {\n    return text\n        .replace(/(?:^\\w|[A-Z]|\\b\\w)/g, function(letter, index) {\n            return index == 0 ? letter.toLowerCase() : letter.toUpperCase();\n        })\n        .replace(/\\s+/g, '');\n}\n\nfunction bindJSX(self, jsx, children = []) {\n    // DETECT LIST\n    children.forEach((child, index) => {\n        const isList = new RegExp(`(<af-${child.elName} />\\\\s*){2,}`, '').exec(\n            jsx\n        );\n        if (isList) {\n            self[_].sockets.push(`${camelize(child.className)}List${index}`);\n            jsx = jsx.replace(\n                new RegExp(`(<af-${child.elName} />\\\\s*){2,}`, ''),\n                `{map(proxies['${camelize(\n                    child.className\n                )}List${index}'], props => <React.Fragment ${mergeProps(\n                    ''\n                )}>{props.children ? props.children : null}</React.Fragment>)}`\n            );\n        } else {\n            jsx = jsx.replace(\n                new RegExp(`af-${child.elName}`, 'g'),\n                `${child.className}.Controller {...this.props}`\n            );\n\n            jsx = jsx.replace(\n                new RegExp(\n                    `(<af-${child.elName} />\\\\s*)+`,\n                    !self[_].isComponent ? 'g' : ''\n                ),\n                !self[_].isComponent\n                    ? `<${child.className}.Controller {...this.props}/>`\n                    : `{map(proxies['${child.className}'], props => <${\n                          child.className\n                      }.Controller ${mergeProps(\n                          ''\n                      )}>{props.children ? props.children : null}</${\n                          child.className\n                      }.Controller>)}`\n            );\n        }\n    });\n\n    // ORDER MATTERS\n    // Open close\n    return (\n        jsx\n            // Replace attributes\n            .replace(/(wfr-a-)([\\w_-]+)=(\".*?\")/g, (match, base) =>\n                match.replace(base, '').replace(/[\"]+/g, '')\n            )\n            // Open close\n            .replace(\n                /<([\\w_-]+)-wfr-d-([\\w_-]+)(.*?)>([^]*)<\\/\\1-wfr-d-\\2>/g,\n                (match, el, sock, attrs, children) => {\n                    // // attrs.forEach(attr => attr.replace('wfr-a-', ''));\n                    // console.log(el);\n\n                    return /<[\\w_-]+-wfr-d-[\\w_-]+/.test(children)\n                        ? `{map(proxies['${sock}'], props => <${el} ${mergeProps(\n                              attrs\n                          )}>{createScope(props.children, proxies => <React.Fragment>\n                {props.topelement ? props.topelement() : null}\n                ${bindJSX(self, children)}</React.Fragment>)}</${el}>)}`\n                        : `{map(proxies['${sock}'], props => <${el} ${mergeProps(\n                              attrs\n                          )}>{props.children ? props.children : <React.Fragment>${children}</React.Fragment>}</${el}>)}`;\n                }\n            )\n            // Self closing\n            .replace(\n                /<([\\w_-]+)-wfr-d-([\\w_-]+)(.*?) \\/>/g,\n                (match, el, sock, attrs) =>\n                    `{map(proxies['${sock}'], props => <${el} ${mergeProps(\n                        attrs\n                    )}>{props.children}</${el}>)}`\n            )\n    );\n}\n\n// Merge props along with class name\nfunction mergeProps(attrs) {\n    attrs = attrs.trim();\n\n    if (!attrs) {\n        return '{...props}';\n    }\n\n    let className = attrs.match(/className=\"([^\"]+)\"/);\n\n    if (!className) {\n        return `${attrs} {...props}`;\n    }\n\n    className = className[1];\n    attrs = attrs.replace(/ ?className=\"[^\"]+\"/, '');\n\n    return `${attrs} {...{...props, className: \\`${className} $\\{props.className || ''}\\`}}`.trim();\n}\n\nexport default ViewWriter;\n","module.exports = require(\"htmltojsx\");","module.exports = require(\"statuses\");","module.exports = require(\"uglify-js\");","import path from 'path';\nimport { requireText } from '../utils';\n\nconst resolve = filename => path.resolve(__dirname, '../src/raw', filename);\n\n// Exporting an object since we're dealing with a getter\nexport default {\n    get viewHelpers() {\n        return requireText(resolve('viewHelpers.js'));\n    },\n};\n","export { default as Internal } from './internal';\nexport { default as requireText } from './requireText';\n\n// Useful for nested strings that should be evaluated\nexport const escape = (str, quote) => {\n    str = str.replace(/\\\\/g, '\\\\\\\\');\n\n    switch (quote) {\n        case \"'\":\n            return str.replace(/'/g, \"\\\\'\");\n        case '\"':\n            return str.replace(/\"/g, '\\\\\"');\n        case '`':\n            return str.replace(/`/g, '\\\\`');\n        default:\n            return str\n                .replace(/'/g, \"\\\\'\")\n                .replace(/\"/g, '\\\\\"')\n                .replace(/`/g, '\\\\`');\n    }\n};\n\nexport const importantizeCSS = css => {\n    return css.replace(/(!important)?;/gi, ' !important;');\n};\n\n// Will use the shortest indention as an axis\nexport const freeText = text => {\n    if (text instanceof Array) {\n        text = text.join('');\n    }\n\n    // This will allow inline text generation with external functions, same as ctrl+shift+c\n    // As long as we surround the inline text with ==>text<==\n    text = text.replace(\n        /( *)==>((?:.|\\n)*?)<==/g,\n        (match, baseIndent, content) => {\n            return content\n                .split('\\n')\n                .map(line => `${baseIndent}${line}`)\n                .join('\\n');\n        }\n    );\n\n    const lines = text.split('\\n');\n\n    const minIndent = lines\n        .filter(line => line.trim())\n        .reduce((minIndent, line) => {\n            const currIndent = line.match(/^ */)[0].length;\n\n            return currIndent < minIndent ? currIndent : minIndent;\n        }, Infinity);\n\n    return lines\n        .map(line => line.slice(minIndent))\n        .join('\\n')\n        .trim()\n        .replace(/\\n +\\n/g, '\\n\\n');\n};\n\n// Calls freeText() and disables lint\nexport const freeLint = script => {\n    return freeText(`\n    /* eslint-disable */\n\n    ==>${freeText(script)}<==\n\n    /* eslint-enable */\n  `);\n};\n\n// Calls freeLint() and ensures that 'this' is represented by window\nexport const freeContext = script => {\n    return freeLint(`\n    (function() {\n\n    ==>${freeText(script)}<==\n\n    }).call(window)\n  `);\n};\n\n// Creates a completely isolated scope with Function constructor.\n// args is a varToInject-injectedVarName map.\nexport const freeScope = (script, context = 'window', args = {}) => {\n    const callArgs = [context].concat(Object.keys(args));\n\n    return freeText(`\n    new Function(\\`\n      with (this) {\n        ${script}\n      }\n    \\`).call(${callArgs.join(', ')})\n  `);\n};\n\n// upper -> Upper\nexport const upperFirst = str => {\n    return str.substr(0, 1).toUpperCase() + str.substr(1);\n};\n\n// foo_barBaz -> ['foo', 'bar', 'Baz']\nexport const splitWords = str => {\n    return str\n        .replace(/[A-Z]/, ' $&')\n        .split(/[^a-zA-Z0-9]+/)\n        .filter(word => word.trim());\n};\n\n// abc 5 0 -> 00abc\nexport const padLeft = (str, length, char = ' ') => {\n    str = String(str);\n    length = parseInt(length + 1 - str.length);\n\n    return Array(length).join(char) + str;\n};\n","const Internal = _ => {\n    if (typeof _ != 'symbol') {\n        throw TypeError('Accessor must me a symbol');\n    }\n\n    return Klass => {\n        if (typeof Klass != 'function') {\n            throw TypeError('Provided target is not a class');\n        }\n\n        const internals = {};\n\n        Object.defineProperty(Klass.prototype, _, {\n            get() {\n                const _this = { ...internals };\n\n                Object.keys(_this).forEach(key => {\n                    const value = _this[key];\n\n                    if (typeof value == 'function') {\n                        _this[key] = value.bind(this);\n                    }\n                });\n\n                Object.defineProperty(this, _, {\n                    value: _this,\n                });\n\n                return _this;\n            },\n        });\n\n        Object.getOwnPropertyNames(Klass.prototype).forEach(key => {\n            if (key[0] != '_') return;\n\n            const { value } = Object.getOwnPropertyDescriptor(\n                Klass.prototype,\n                key\n            );\n\n            if (typeof value != 'function') return;\n\n            const publicKey = key.slice(1);\n            internals[publicKey] = value;\n            delete Klass.prototype[key];\n        });\n    };\n};\n\nexport default Internal;\n","import { readFile, readFileSync } from 'fs';\nimport resolvePath from 'resolve';\n\nconst cache = {};\n\nconst requireText = path => {\n    path = resolvePath.sync(path);\n\n    return (cache[path] = cache[path] || readFileSync(path).toString());\n};\n\nrequireText.promise = path =>\n    new Promise((resolve, reject) => {\n        resolvePath(path, (err, path) => {\n            if (err) {\n                return reject(err);\n            }\n\n            let content = cache[path];\n\n            if (content) {\n                return resolve(content);\n            }\n\n            readFile(path, (err, content) => {\n                if (err) {\n                    return reject(err);\n                }\n\n                cache[path] = content = content.toString();\n\n                resolve(content);\n            });\n        });\n    });\n\nexport default requireText;\n","module.exports = require(\"resolve\");","import fetch from 'node-fetch';\nimport path from 'path';\nimport uglify from 'uglify-js';\nimport { fs, mkdirp } from '../libs';\nimport Writer from './writer';\n\nimport {\n    Internal,\n    escape,\n    freeText,\n    freeLint,\n    freeContext,\n    padLeft,\n    requireText,\n} from '../utils';\n\nconst _ = Symbol('_ScriptWriter');\n\n@Internal(_)\nclass ScriptWriter extends Writer {\n    get scripts() {\n        return this[_].scripts.slice();\n    }\n\n    get prefetch() {\n        return this[_].prefetch;\n    }\n\n    set prefetch(prefetch) {\n        return (this[_].prefetch = !!prefetch);\n    }\n\n    get baseUrl() {\n        return this[_].baseUrl;\n    }\n\n    set baseUrl(baseUrl) {\n        this[_].baseUrl = String(baseUrl);\n    }\n\n    constructor(options = {}) {\n        super();\n\n        this[_].scripts = [];\n\n        this.baseUrl = options.baseUrl;\n        this.prefetch = options.prefetch;\n    }\n\n    async write(dir, options) {\n        await mkdirp(dir);\n\n        options = {\n            ...options,\n            prefetch: this.prefetch,\n        };\n\n        const indexFilePath = `${dir}/index.js`;\n        const childFilePaths = [indexFilePath];\n\n        if (!options.prefetch) {\n            await fs.writeFile(indexFilePath, this[_].composeScriptLoader());\n            return childFilePaths;\n        }\n\n        const scriptFileNames = this.scripts.map(\n            (script, index, { length }) => {\n                const fileName = padLeft(index, length / 10 + 1, 0) + '.js';\n                const filePath = `${dir}/${fileName}`;\n                childFilePaths.push(filePath);\n\n                return fileName;\n            }\n        );\n\n        const fetchingScripts = this.scripts.map(async (script, index) => {\n            const scriptFileName = scriptFileNames[index];\n\n            let code =\n                script.type == 'code'\n                    ? script.body\n                    : /^http/.test(script.body)\n                    ? await fetch(script.body)\n                          .then(res => res.text())\n                          .then(text => uglify.minify(text).code)\n                    : requireText(`${this.baseUrl}/${script.body}`);\n            code = code.replace(/\\n\\/\\/# ?sourceMappingURL=.*\\s*$/, '');\n            code = freeContext(code);\n\n            return fs.writeFile(`${dir}/${scriptFileName}`, code);\n        });\n\n        const scriptsIndexContent = scriptFileNames\n            .map(scriptFileName => {\n                return `import './${scriptFileName}'`;\n            })\n            .join('\\n');\n\n        const writingIndex = fs.writeFile(\n            indexFilePath,\n            freeLint(scriptsIndexContent)\n        );\n\n        await Promise.all([...fetchingScripts, writingIndex]);\n\n        return childFilePaths;\n    }\n\n    setScript(src, content) {\n        let type;\n        let body;\n\n        if (src) {\n            type = 'src';\n            body = /^\\w+:\\/\\//.test(src) ? src : path.resolve('/', src);\n        } else {\n            type = 'code';\n            body = uglify.minify(content).code;\n        }\n\n        const exists = this[_].scripts.some(script => {\n            return script.body == body;\n        });\n\n        if (!exists) {\n            this[_].scripts.push({ type, body });\n        }\n    }\n\n    _composeScriptLoader() {\n        const scripts = this[_].scripts\n            .map(script => {\n                return freeText(`\n        {\n          type: '${script.type}',\n          body: '${escape(script.body, \"'\")}',\n        },\n      `);\n            })\n            .join('\\n');\n\n        return freeLint(`\n      const scripts = [\n        ==>${scripts}<==\n      ]\n\n      const loadingScripts = scripts.reduce((loaded, script) => loaded.then(() => {\n        const scriptEl = document.createElement('script')\n        scriptEl.type = 'text/javascript'\n        let loading\n\n        if (script.type == 'src') {\n          scriptEl.src = script.body\n\n          loading = new Promise((resolve, reject) => {\n            scriptEl.onload = resolve\n            scriptEl.onerror = reject\n          })\n        }\n        else {\n          scriptEl.innerHTML = script.body\n\n          loading = Promise.resolve()\n        }\n\n        document.head.appendChild(scriptEl)\n\n        return loading\n      }), Promise.resolve())\n\n      export default loadingScripts\n    `);\n    }\n}\n\nexport default ScriptWriter;\n","module.exports = require(\"node-fetch\");","import CleanCSS from 'clean-css';\nimport fetch from 'node-fetch';\nimport path from 'path';\nimport { fs, mkdirp } from '../libs';\nimport Writer from './writer';\n\nimport {\n    Internal,\n    escape,\n    freeText,\n    freeLint,\n    padLeft,\n    requireText,\n} from '../utils';\n\nconst _ = Symbol('_StyleWriter');\nconst cleanCSS = new CleanCSS({\n    rebaseTo: '..',\n});\n\n@Internal(_)\nclass StyleWriter extends Writer {\n    get styles() {\n        return this[_].styles.slice();\n    }\n\n    get prefetch() {\n        return this[_].prefetch;\n    }\n\n    set prefetch(prefetch) {\n        return (this[_].prefetch = !!prefetch);\n    }\n\n    get baseUrl() {\n        return this[_].baseUrl;\n    }\n\n    set baseUrl(baseUrl) {\n        this[_].baseUrl = String(baseUrl);\n    }\n\n    get source() {\n        return this[_].source;\n    }\n\n    set source(source) {\n        this[_].source = String(source);\n    }\n\n    constructor(options = {}) {\n        super();\n\n        this[_].styles = [];\n\n        this.baseUrl = options.baseUrl;\n        this.prefetch = options.prefetch;\n        this.source = options.srouce;\n    }\n\n    async write(dir, options) {\n        await mkdirp(dir);\n\n        options = {\n            ...options,\n            prefetch: this.prefetch,\n        };\n\n        const indexFilePath = `${dir}/index.js`;\n        const childFilePaths = [indexFilePath];\n\n        if (!options.prefetch) {\n            await fs.writeFile(indexFilePath, this[_].composeStyleLoader());\n            return childFilePaths;\n        }\n\n        const styleFileNames = this.styles.map((style, index, { length }) => {\n            const fileName = padLeft(index, length / 10 + 1, 0) + '.css';\n            const filePath = `${dir}/${fileName}`;\n            childFilePaths.push(filePath);\n\n            return fileName;\n        });\n\n        const fetchingStyles = this.styles.map(async (style, index) => {\n            const styleFileName = styleFileNames[index];\n\n            const sheet =\n                style.type == 'sheet'\n                    ? style.body\n                    : /^http/.test(style.body)\n                    ? await fetch(style.body).then(res => res.text())\n                    : await requireText.promise(\n                          `${this.baseUrl}/${style.body}`\n                      );\n\n            return fs.writeFile(\n                `${dir}/${styleFileName}`,\n                this[_].transformSheet(sheet)\n            );\n        });\n\n        const stylesIndexContent = styleFileNames\n            .map(styleFileName => {\n                return `import './${styleFileName}'`;\n            })\n            .join('\\n');\n\n        const writingIndex = fs.writeFile(\n            indexFilePath,\n            freeLint(stylesIndexContent)\n        );\n\n        await Promise.all([...fetchingStyles, writingIndex]);\n\n        return childFilePaths;\n    }\n\n    setStyle(href, content) {\n        let type;\n        let body;\n\n        if (href) {\n            type = 'href';\n            body = /^\\w+:\\/\\//.test(href) ? href : path.resolve('/', href);\n        } else {\n            type = 'sheet';\n            body = content;\n        }\n\n        const exists = this[_].styles.some(style => {\n            return style.body == body;\n        });\n\n        if (!exists) {\n            this[_].styles.push({ type, body });\n        }\n    }\n\n    _composeStyleLoader() {\n        this[_].styles.forEach(style => {\n            if (style.type == 'sheet') {\n                style.body = this[_].transformSheet(style.body);\n            }\n        });\n\n        const styles = this[_].styles\n            .map(style => {\n                return freeText(`\n        {\n          type: '${style.type}',\n          body: '${escape(style.body, \"'\")}',\n        },\n      `);\n            })\n            .join('\\n');\n\n        return freeLint(`\n      const styles = [\n        ==>${styles}<==\n      ]\n\n      const loadingStyles = styles.map((style) => {\n        let styleEl\n        let loading\n\n        if (style.type == 'href') {\n          styleEl = document.createElement('link')\n\n          loading = new Promise((resolve, reject) => {\n            styleEl.onload = resolve\n            styleEl.onerror = reject\n          })\n\n          styleEl.rel = 'stylesheet'\n          styleEl.type = 'text/css'\n          styleEl.href = style.body\n        }\n        else {\n          styleEl = document.createElement('style')\n          styleEl.type = 'text/css'\n          styleEl.innerHTML = style.body\n\n          loading = Promise.resolve()\n        }\n\n        document.head.appendChild(styleEl)\n\n        return loading\n      })\n    `);\n    }\n\n    // Will minify and encapsulate classes\n    _transformSheet(sheet) {\n        sheet = cleanCSS.minify(sheet).styles;\n\n        // Make URLs absolute so webpack won't throw any errors\n        return sheet.replace(/url\\(([^)]+)\\)/g, (match, url) => {\n            if (/^(.+):\\/\\//.test(url)) return match;\n\n            url = path.resolve('/', url);\n            return `url(${url})`;\n        });\n    }\n}\n\nexport default StyleWriter;\n","module.exports = require(\"clean-css\");"],"sourceRoot":""}